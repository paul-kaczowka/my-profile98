(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[2],{612:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a}));var o={AD:"376",AE:"971",AF:"93",AG:"1",AI:"1",AL:"355",AM:"374",AO:"244",AR:"54",AT:"43",AU:"61",AW:"297",AX:"358",AZ:"994",BA:"387",BB:"1",BD:"880",BE:"32",BF:"226",BG:"359",BH:"973",BI:"257",BJ:"229",BM:"1",BN:"673",BO:"591",BR:"55",BS:"1",BT:"975",BW:"267",BY:"375",BZ:"501",CA:"1",CD:"243",CF:"236",CG:"242",CH:"41",CI:"225",CL:"56",CM:"237",CN:"86",CO:"57",CR:"506",CU:"53",CV:"238",CY:"357",CW:"599",CZ:"420",DE:"49",DJ:"253",DK:"45",DM:"1",DO:"1",DZ:"213",EC:"593",EE:"372",EG:"20",ER:"291",ES:"34",ET:"251",FI:"358",FJ:"679",FK:"500",FM:"691",FO:"298",FR:"33",GA:"241",GB:"44",GD:"1",GE:"995",GG:"44",GH:"233",GI:"350",GM:"220",GN:"224",GQ:"240",GR:"30",GT:"502",GW:"245",GY:"592",HK:"852",HN:"504",HR:"385",HT:"509",HU:"36",ID:"62",IE:"353",IL:"972",IM:"44",IN:"91",IQ:"964",IR:"98",IS:"354",IT:"39",JE:"44",JM:"1",JO:"962",JP:"81",KE:"254",KG:"996",KH:"855",KM:"269",KN:"1",KP:"850",KR:"82",KW:"965",KY:"1",KZ:"7",LA:"856",LB:"961",LC:"1",LI:"423",LK:"94",LR:"231",LS:"266",LT:"370",LU:"352",LV:"371",LY:"218",MA:"212",MC:"377",MD:"373",ME:"382",MG:"261",MK:"389",ML:"223",MM:"95",MN:"976",MO:"853",MR:"222",MS:"1",MT:"356",MU:"230",MV:"960",MW:"265",MX:"52",MY:"60",MZ:"258",NA:"264",NE:"227",NG:"234",NI:"505",NL:"31",NO:"47",NP:"977",NZ:"64",OM:"968",PA:"507",PE:"51",PF:"689",PG:"675",PH:"63",PK:"92",PL:"48",PR:"1",PS:"970",PT:"351",PW:"680",PY:"595",QA:"974",RE:"262",RO:"40",RS:"381",RU:"7",RW:"250",SA:"966",SB:"677",SC:"248",SD:"249",SE:"46",SG:"65",SH:"290",SI:"386",SK:"421",SL:"232",SM:"378",SN:"221",SO:"252",SR:"597",ST:"239",SV:"503",SY:"963",SZ:"268",TC:"1",TD:"235",TG:"228",TH:"66",TJ:"992",TL:"670",TM:"993",TN:"216",TO:"676",TR:"90",TT:"1",TW:"886",TZ:"255",UA:"380",UG:"256",US:"1",UY:"598",UZ:"998",VC:"1",VE:"58",VG:"1",VN:"84",VU:"678",WS:"685",YE:"967",ZA:"27",ZM:"260",ZW:"263"},r=function(e){return o[e]||""},i=function(e,t){return t.replace("+".concat(r(e)),"")},a=function(){return Object.keys(o)}},633:function(e,t){e.exports=function(e){var t=e.node;return{setSelection:function(e,n){if(void 0===n&&"number"==typeof e?n=e:void 0===n&&(n=e.end,e=e.start),void 0!==t.selectionStart)t.selectionStart=e,t.selectionEnd=n;else{var o=t.createTextRange();o.collapse(!0),o.moveStart("character",e),o.moveEnd("character",n-e),o.select()}},getSelection:function(){var e,n;if(void 0!==t.selectionStart)e=t.selectionStart,n=t.selectionEnd;else{var o=document.selection.createRange();null==o&&(e=n=0);var r=t.createTextRange(),i=r.duplicate();r.moveToBookmark(o.getBookmark()),i.setEndPoint("EndToEnd",r),n=i.text.length,i.setEndPoint("EndToStart",r),e=i.text.length}return{start:e,end:n}}}}},709:function(e,t,n){"use strict";n.r(t);var o=n(56),r=n(9),i=n(0),a=n.n(i),c=n(11),l=n(4),s=n.n(l),u=n(23),p=n(54),d=n.n(p),h=n(219),m=n(279),f=n(7),b=n.n(f),v=n(217),g=n.n(v),y=n(83),k=n(49),C=n.n(k),O=n(22),w=n.n(O),j=n(616),E=n.n(j),S=n(77),x=n.n(S),P=n(66),I=n.n(P),A=n(216),R=n.n(A),F=n(129),D=n.n(F),N=n(68),T=n(36),B=c.c.div.withConfig({displayName:"ErrorMessage__ErrorWrapper",componentId:"zg4jt9-0"})(["pointer-events:none;border-radius:3px;position:absolute;padding:4px 8px;background-color:rgba(153,0,0,0.6);color:#fff;"]),L=function(e){var t=e.id,n=e.visible,o=e.validations,r=e.t;return null==t?null:n?a.a.createElement(R.a,{type:"slideUp",duration:300},a.a.createElement(B,null,a.a.createElement(x.a,{size:"sizeN1",color:"#FFFFFF",dataQa:"error-message".concat(n?"-visible":""),useDefaultFont:!0},Object(T.a)(r(t,function(e,t){switch(e){case"label.error.minValue":return{min_value:t.minValue.minValue-1};case"label.error.maxValue":return{max_value:t.maxValue.maxValue+1};case"label.error.range":return{max_value:t.range.maxValue,min_value:t.range.minValue}}return{}}(t,o)))))):null};L.defaultProps={visible:!1,id:"label.error.required",t:function(e){return e}};var M=Object(N.a)(L),z=n(223),_=n.n(z),H=function(e){var t=e.centered,n=e.fullWidth,o=e.isComplete,i=e.isLivePreview,c=e.isPaymentBlockAnswered,l=e.isReviewModeEnabled,s=e.isSubmitting,u=e.onClick,p=e.price,d=e.size,h=e.t,m=e.theme,f=h("label.button.submit");l?f=h("label.button.review"):c&&(f=h("label.button.submitAndPay",{price:p}));var b=l?"rgba(153, 0, 0, 0.6)":m.colors.button,v=Object(r.j)()||t?"":Object(T.a)(h("label.buttonHint.default")),g=l?"review-mode-button deep-purple-review-mode-button":"submit-button deep-purple-submit-button";return a.a.createElement(_.a,{size:d,content:f,color:b,contextBackgroundColor:m.colors.background,helperText:v,helperColor:m.colors.primary,dataQa:g,onClick:u,centered:t,fullWidth:n,isTransparent:m.hasTransparentButton&&!l,isSpinning:!i&&s,disabled:!i&&(s||o)})};H.defaultProps={centered:!1,size:"large",theme:{colors:{},hasTransparentButton:!1},t:function(e){return e}};var W=Object(N.a)(H),V=n(220),K=function(e){var t=e.backgroundColor,n=e.buttonColor,o=e.helperColor,i=e.helperText,c=e.hideIcon,l=e.label,s=e.onClick,u=e.isVisible,p=e.t,d=u?"-visible":"";return a.a.createElement(_.a,{size:"medium",content:Object(T.a)(p(l)),color:n,contextBackgroundColor:t,helperText:Object(r.j)()?null:Object(T.a)(p(i)),helperColor:o,onClick:s,iconSvg:c?null:V.a,dataQa:"ok-button".concat(d," deep-purple-ok-button").concat(d)})};K.defaultProps={backgroundColor:r.b,buttonColor:r.b,helperColor:r.b,helperText:"label.buttonHint.default",hideIcon:!1,isVisible:!1,label:"label.button.ok",t:function(e){return e}};var q=K,Y=c.c.a.withConfig({displayName:"RetryLink__Link",componentId:"gd74g9-0"})(["color:",";cursor:",";margin-left:5px;opacity:",";text-decoration:underline;"],(function(e){return e.color}),(function(e){return e.disabled?"default":"pointer"}),(function(e){return e.disabled?.3:1})),U=function(e){var t=e.color,n=e.isEnabled,o=e.onClick,r=e.timeout,i=e.t;return 0===r?a.a.createElement("div",null,i("label.retryLink.retrying")):a.a.createElement("div",null,i("label.retryLink.counter",{timeout:r}),a.a.createElement(Y,{color:t,disabled:!n,title:i("label.retryLink.title"),onClick:o},i("label.retryLink.title")))};U.defaultProps={t:function(e){return e}};var G=Object(N.a)(U),Q=function(e){var t=e.color,n=e.t,o=e.messageKey,r=e.actionLink;return a.a.createElement(x.a,{size:"sizeN1",color:t,useDefaultFont:!0},o&&Object(T.a)(n(o)),r)};Q.defaultProps={t:function(e){return e}};var X=Object(N.a)(Q),Z=n(45),J=c.c.div.withConfig({displayName:"retry-message__Root",componentId:"w0zdmz-0"})(["visibility:",";min-height:48px;"],(function(e){return e.isVisible?"visible":"hidden"})),$=function(e){var t=e.visible,n=e.timeout,o=e.color,r=e.onRetryClick;return a.a.createElement(J,{isVisible:t},a.a.createElement(I.a,{top:2},a.a.createElement(X,{messageKey:"label.warning.slowSubmission",color:o,actionLink:a.a.createElement(G,{color:o,isEnabled:0!==n,onClick:r,timeout:n})})))};$.defaultProps={onRetryClick:Z.a};var ee=$,te=function(e){var t=e.visible,n=e.centered,o=e.color,r=e.warningText,i=e.actionText;return t&&a.a.createElement(D.a,{position:n?"center":"left"},a.a.createElement(I.a,{top:2},a.a.createElement(x.a,{color:o,size:"sizeN1",useDefaultFont:!0,dimmed:!0},r," - ",a.a.createElement("a",{href:"https://www.typeform.com/help/report-abuse",target:"_blank",rel:"noopener noreferrer"},i))))},ne=n(224),oe=function(e,t){var n=Object(ne.b)(e),o=Object(i.useState)(n),r=d()(o,2),a=r[0],c=r[1];n!==a&&(c(n),setTimeout(t,0))},re=a.a.createContext(!1);function ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.boundingClientRect,o=void 0===n?{}:n,r=t.onlyTop,i=void 0!==r&&r,a=t.offsetTop,c=void 0===a?0:a,l=t.offsetBottom,s=void 0===l?0:l;if(!e||"function"!=typeof e.getBoundingClientRect)return!1;var u=e.getBoundingClientRect(),p={height:o.height||window.innerHeight||document.documentElement.clientHeight,top:o.top||0},d=u.top>=p.top+c,h=u.bottom<=p.height-s;return i?d:d&&h}var ae=function(e){var t=e.blockRef,n=e.buttonText,o=e.helperText,r=e.hideIcon,c=e.invalidAnswersAmount,l=e.isAnimated,s=e.isButtonFullWidth,u=e.isLivePreview,p=e.isPaymentBlockAnswered,d=e.isReviewModeEnabled,h=e.isButtonTypeSubmit,m=e.isButtonVisible,f=e.layoutItemsSize,b=e.onClick,v=e.onRequireStickyFooter,g=e.price,y=e.resetRetryCount,k=e.showPhishingMessage,C=e.submit,O=e.submitForm,w=e.t,j=e.theme,E=e.trackInlineSubmit,S=e.errorMessageId,x=e.isErrorMessageVisible,P=e.validations,I=Object(i.useRef)(null),A=Object(i.useContext)(re),F=function(){if(I.current){var e=ie(I.current,f),n=!m||e;if(!e&&m){if(A)return;v(t,!0)}else n&&v(t,!1)}};oe(t,(function(){m&&F()})),Object(i.useEffect)((function(){A?v(t,!1):F()}),[A]),Object(i.useEffect)((function(){m?F():v(t,!1)}),[m]),Object(i.useEffect)((function(){m&&h&&E()}),[m,h]);var N=a.a.createElement("div",{ref:I,"data-qa-button-visible":m},h?a.a.createElement(i.Fragment,null,a.a.createElement(D.a,{position:s?"center":"left"},a.a.createElement(H,{centered:s,fullWidth:s,isComplete:C.isComplete,isLivePreview:u,isPaymentBlockAnswered:p,isReviewModeEnabled:d&&c>0,isSubmitting:C.isSubmitting,onClick:b,price:g,size:"medium",t:w,theme:j})),a.a.createElement(te,{color:j.colors.primary,warningText:w("label.warning.phishing"),actionText:w("label.action.phishing"),visible:k,centered:s}),a.a.createElement(ee,{timeout:C.retry.timeout,visible:C.retry.showMessage,color:j.colors.primary,onRetryClick:function(){y(),O()}})):a.a.createElement(q,{backgroundColor:j.colors.background,buttonColor:j.colors.button,helperColor:j.colors.primary,helperText:o,hideIcon:r,isVisible:m,label:n,onClick:b,t:w}));return a.a.createElement(i.Fragment,null,a.a.createElement(M,{id:S,visible:x,validations:P}),l?a.a.createElement(R.a,{type:"slideUp",isVisible:m,delay:0,duration:100},N):N)},ce=Object(N.a)(ae);ae.defaultProps={isAnimated:!0,showPhishingMessage:!0,submit:{retry:{},isComplete:!1,isSubmitting:!1},onRequireStickyFooter:Z.a,submitForm:Z.a,theme:{colors:{primary:r.b,background:r.b}},t:function(e){return e},validations:{}};var le=n(10),se=n(17),ue=n(13),pe=n(47),de=n(2),he=n(16),me=n(106),fe={onRequireStickyFooter:u.n,resetRetryCount:u.p,reviewForm:u.e,submitForm:u.w,trackInlineSubmit:u.A},be=Object(o.b)((function(e,t){var n=t.blockRef,o=t.customError,r=t.hideError,i=t.hideButton,a=!Object(le.i)(e)&&Object(le.o)(e),c=Object(se.b)(e,n),l=c&&Object(se.d)(c),s=c&&Object(se.e)(c),u=Object(se.f)(e,n),p=o||u,d=(!!o||l&&!s)&&!r,h=Object(ue.p)(e,n)&&!Object(ue.m)(e,n)||Object(le.q)(e,n);return{errorMessageId:p,invalidAnswersAmount:Object(se.n)(e),isButtonTypeSubmit:Object(ue.n)(e,n),isErrorMessageVisible:d,isLivePreview:Object(le.l)(e),isPaymentBlockAnswered:Object(se.r)(e),isReviewModeEnabled:a,isButtonVisible:!d&&!i&&h,price:Object(de.K)(e),showPhishingMessage:Object(he.d)(e),submit:Object(pe.g)(e),theme:Object(me.e)(e),validations:Object(ue.i)(e,n)}}),fe)(ce),ve=n(609),ge=n.n(ve),ye=n(597),ke=n(67),Ce=function(e,t){return"".concat(e).concat("lg"===t?"Desktop":"Mobile")},Oe=n(15),we=Object(c.d)(["20%{transform:translateX(3px);}80%{transform:translateX(-3px);}"]),je=Object(c.b)(["animation:"," 0.15s cubic-bezier(0.36,0.07,0.19,0.97) both infinite;"],we),Ee=c.c.section.withConfig({displayName:"Container__Section",componentId:"sc-1blfuhz-0"})(["height:100%;width:",";z-index:",";position:relative;",";",";@media print{page-break-inside:avoid;opacity:1;}"],(function(e){return e.isHalfWidth?"50%":"100%"}),(function(e){return e.isActive?Oe.j.level1:Oe.j.level0}),(function(e){return e.isShaking&&je}),(function(e){return e.isVisible?"":"visibility: hidden;"})),Se=function(e){var t=e.blockRef,n=e.isHalfWidth,o=e.isActive,r=e.isShaking,i=e.isVisible,c=e.children,l=e.dataQa,s=e.innerRef;return a.a.createElement(Ee,w()({id:"block-".concat(t),isHalfWidth:n,isActive:o,isShaking:r,isVisible:i,"data-js-activable-item":!0},o&&{"data-qa-focused":!0},{"data-qa-blockref":t,"data-qa-block":!0,"data-qa":l,ref:s}),c)},xe=n(265),Pe=n.n(xe),Ie=n(623),Ae=n.n(Ie),Re=c.c.div.withConfig({displayName:"block-scroller__Root",componentId:"sc-23jz1-0"})(["width:100%;height:100%;-webkit-overflow-scrolling:touch;overflow-x:hidden;overflow-y:auto;"]),Fe=c.c.div.withConfig({displayName:"block-scroller__Positioner",componentId:"sc-23jz1-1"})(["min-height:100%;display:flex;flex-direction:column;justify-content:",";"],(function(e){return e.centerContent?"center":"flex-start"})),De=function(e){var t=e.blockRef,n=e.children,o=e.endAutoScroll,r=e.isActive,c=e.onChangeCanSwipe,l=e.centerContent,s=e.onRequireStickyHeader,u=e.onScroll,p=e.isScrollNearTop,d=e.scrolling,m=Object(i.useRef)(),f=Object(i.useContext)(re),b=Object(ne.c)(t),v=function(){return!!m.current&&m.current.scrollTop-30<=0},g=function(){r&&c({next:!!m.current&&m.current.scrollTop+30>=m.current.scrollHeight-m.current.clientHeight,previous:v()})},y=Object(i.useCallback)(Pe()((function(){if(m.current){var e=m.current.scrollTop;g(),u(),b(e),e>88&&p?s(!0):e<=88&&!p&&s(!1)}}),300),[m.current,p]);return Object(i.useEffect)((function(){r||f||!v()&&m.current&&(m.current.scrollTop=0),g()}),[f,r]),Object(i.useEffect)((function(){if(r&&d&&"recenter"===d.scrollType&&"bottom"===d.anchor&&m.current){var e=h.a?0:200;Ae()(m.current,"scrollTop",m.current.scrollHeight-m.current.clientHeight,e,"easeOutCubic",o)}}),[d]),a.a.createElement(Re,{ref:m,onScroll:y,"data-qa":"block-scroller",id:"block-scroller-".concat(t)},a.a.createElement(Fe,{centerContent:l},n))};De.defaultProps={endAutoScroll:Z.a,onChangeCanSwipe:Z.a,onScroll:Z.a};var Ne=De,Te=n(35),Be=n.n(Te),Le=n(42),Me=n.n(Le),ze=n(43),_e=n.n(ze),He=n(40),We=n.n(He),Ve=n(24),Ke=n.n(Ve),qe=n(44),Ye=n.n(qe),Ue=n(607),Ge=n.n(Ue),Qe=n(166),Xe=n.n(Qe),Ze=c.c.fieldset.withConfig({displayName:"A11yContainer__Fieldset",componentId:"ejane9-0"})(["border:0;padding:0.01em 0 0;margin:0;min-width:0;"]);Ze.displayName="fieldset";var Je=function(e){var t=e.children,n=e.isFieldset?Ze:i.Fragment;return a.a.createElement(n,null,t)},$e=c.c.legend.withConfig({displayName:"A11yTitle__Legend",componentId:"gex6e0-0"})(["width:1px;height:1px;overflow:hidden;display:block;"]),et=function(e){var t=e.children,n=e.id,o=e.htmlTag;return"legend"===o?a.a.createElement("span",null,a.a.createElement($e,null,t),a.a.createElement("span",{"data-qa":"block-title deep-purple-block-title"},t)):a.a.createElement(Xe.a,{type:"title",htmlTag:o,htmlFor:n,"data-qa":"block-title deep-purple-block-title"},t)};et.defaultProps={htmlTag:"span"};var tt=et,nt=n(222),ot=n(12),rt=n(131),it=c.c.div.withConfig({displayName:"block-structure__AttachmentWrapper",componentId:"sc-4tm7ct-0"})(["box-sizing:border-box;width:100%;display:flex;flex-direction:column;margin-top:32px;will-change:opacity;"]),at=c.c.div.withConfig({displayName:"block-structure__QuestionHeaderWrapper",componentId:"sc-4tm7ct-1"})(["will-change:opacity;"]),ct=function(e){function t(e){var n;return Be()(this,t),(n=_e()(this,We()(t).call(this,e))).handleAttachmentLoaded=n.handleAttachmentLoaded.bind(Ke()(n)),n.state={maxAttachmentHeight:200},n.calculatedAttachmentHeight=!1,n}return Ye()(t,e),Me()(t,[{key:"componentWillUpdate",value:function(){this.calculatedAttachmentHeight||this.calculateMaxImageHeight()}},{key:"calculateMaxImageHeight",value:function(){var e=200;this.props.attachment&&this.blockNode&&this.thisNode&&this.attachmentRef&&this.props.layoutItemsSize.boundingClientRect.height&&(e=function(e,t,n,o,r){var i=0;e===ot.a.multipleChoice&&(i=r-95);var a=t-(n-o-i);return Math.max(a,200)}(this.props.type,this.props.layoutItemsSize.boundingClientRect.height,this.thisNode.clientHeight,this.attachmentRef.clientHeight,this.blockNode.clientHeight),this.calculatedAttachmentHeight=!0,this.setState({maxAttachmentHeight:e}))}},{key:"handleAttachmentLoaded",value:function(){this.props.isLivePreview&&(this.calculatedAttachmentHeight=!1),this.calculatedAttachmentHeight||this.calculateMaxImageHeight()}},{key:"render",value:function(){var e=this,t=this.props,n=t.attachment,o=t.childOfGroup,i=t.children,c=t.description,l=t.descriptionComponent,s=void 0===l?st:l,u=t.isActive,p=t.questionHeaderWrapperComponent,d=void 0===p?at:p,h=t.layoutKind,m=t.listIndexText,f=t.theme,b=t.title,v=t.titleComponent,g=void 0===v?lt:v,y=t.titleCounterIcon,k=t.useFieldset,C=t.validations,O="string"==typeof b?b:b&&b.text,j=Object(r.j)()?6:8;return a.a.createElement(I.a,{ref:function(t){return e.thisNode=t},bottom:j+2},a.a.createElement(Je,{isFieldset:k},n&&h===rt.a.FLOAT.MOBILE&&a.a.createElement(it,{innerRef:function(t){return e.attachmentRef=t}},a.a.createElement(I.a,{bottom:4},a.a.createElement(nt.a,w()({},n,{maxHeight:this.state.maxAttachmentHeight,onLoaded:this.handleAttachmentLoaded,forcePause:!u,isVisible:u})))),a.a.createElement(d,{ref:function(t){return e.headerNode=t}},a.a.createElement(Ge.a,{title:a.a.createElement(g,{value:O,htmlFor:b.for,type:b.type}),titleSize:"size2",color:f.colors&&f.colors.primary,required:C&&C.required,counterIcon:o&&m?null:y,counterColor:f.colors&&f.colors.secondary,counterContent:o&&m?"".concat(m,"."):m}),c&&a.a.createElement(I.a,{top:1},a.a.createElement(Xe.a,{type:"description",color:f.colors&&f.colors.primary,htmlTag:"p",dataQa:"block-description"},a.a.createElement(s,{value:c})))),n&&("stackDesktop"===h||"stackMobile"===h)&&a.a.createElement(it,{ref:function(t){return e.attachmentRef=t}},a.a.createElement(I.a,{top:4},a.a.createElement(nt.a,w()({},n,{maxHeight:this.state.maxAttachmentHeight,onLoaded:this.handleAttachmentLoaded,forcePause:!u,isVisible:u})))),a.a.createElement("div",{ref:function(t){return e.blockNode=t}},i)))}}]),t}(i.Component),lt=function(e){var t=e.htmlFor,n=e.type,o=e.value;return a.a.createElement(tt,{id:t,htmlTag:n},Object(T.a)(o,{allowHyperlinks:!0}))},st=function(e){var t=e.value;return a.a.createElement(i.Fragment,null,Object(T.a)(t,{allowHyperlinks:!0}))};ct.defaultProps={layoutItemsSize:{},recenter:Z.a,theme:{colors:{primary:r.b}},title:"",titleCounterIcon:"arrow",useFieldset:!1,validations:{}};var ut=ct,pt={x:0,y:0},dt=c.c.div.withConfig({displayName:"BlockWrapper__Root",componentId:"rj9twd-0"})(["display:flex;height:100%;position:relative;"]),ht=c.c.div.withConfig({displayName:"BlockWrapper__SplitMobileAttachmentWrapper",componentId:"rj9twd-1"})(["height:30vh;"]),mt=function(e){var t=e.attachment,n=e.blockRef,o=e.children,r=e.endAutoScroll,i=e.forceBreakpoint,c=e.isActive,l=e.isAnswered,s=e.isScrollNearTop,u=e.isShaking,p=e.isVisible,d=e.layout,h=e.layoutContainerComponent,m=e.onChangeCanSwipe,f=e.onRequireStickyHeader,b=e.onScroll,v=e.scrolling,g=e.type,y=Object(ke.useBreakpoint)();i&&(y=i);var k=Ce(d.type,y),C=[rt.a.FLOAT.DESKTOP,rt.a.SPLIT.DESKTOP].includes(k),O=ge()(pt,["attachment","properties","focalPoint"],d);return a.a.createElement(Se,{isHalfWidth:C,isActive:c,isVisible:p,isAnswered:l,isShaking:c&&u,blockRef:n,dataQa:"blocktype-".concat(g," deep-purple-blocktype-").concat(g)},a.a.createElement(dt,null,a.a.createElement(Ne,{blockRef:n,endAutoScroll:r,isActive:c,onChangeCanSwipe:m,onRequireStickyHeader:f,onScroll:b,isScrollNearTop:s,scrolling:v,centerContent:k!==rt.a.SPLIT.MOBILE},k===rt.a.SPLIT.MOBILE&&a.a.createElement(ht,null,a.a.createElement(nt.a,w()({},t,{focalPoint:O,cover:!0}))),a.a.createElement(h,null,a.a.createElement(I.a,{top:6,bottom:6},a.a.createElement(ut,w()({},e,{layoutKind:k}),o))))))};mt.defaultProps={layout:{type:"stack"},onScroll:function(){},layoutContainerComponent:ye.a};var ft=mt,bt=n(105);function vt(e,t){return e.keyCode===bt.a.ARUP&&0!==t}function gt(e,t,n){return e.keyCode===bt.a.ARDOWN&&t!==n.value.length}function yt(e){return e.keyCode===bt.a.ENTER||e.which===bt.a.ENTER}var kt=function(e,t,n){return ot.a.number===e&&(!(o=n).ctrlKey&&!o.metaKey||"v"!==o.key&&"c"!==o.key&&"z"!==o.key)&&!yt(n)&&!function(e){var t=e.which;return bt.a.NUM_0<=t&&t<=bt.a.NUM_9}(n)?(n.preventDefault(),{blocked:!0}):e===ot.a.number&&t&&t<=n.target.value.length&&!yt(n)?(n.preventDefault(),{blocked:!0}):e===ot.a.shortText&&t&&t<=n.target.value.length&&!yt(n)?(n.preventDefault(),{blocked:!0}):e===ot.a.longText&&t&&t<=n.target.value.length&&!yt(n)?(n.preventDefault(),{blocked:!0}):{blocked:!1};var o},Ct=function(e,t){var n,o=function(e,t,n){var o;try{o=n&&n.selectionStart}catch(e){0}return void 0!==o&&e.some((function(e){return e(t,o,n)}))}([vt,gt,yt],t.nativeEvent,t.target);ot.a.number===e&&((n=t).key===bt.a.DEAD||n.keyIdentifier===bt.a.UNIDENTIFIED)&&t.preventDefault(),o&&t.stopPropagation()},Ot=n(165),wt=function(e,t){return e.isActive||t.isActive||e.isCommitted!==t.isCommitted||e.layoutItemsSize!==t.layoutItemsSize},jt=function(e,t){return!wt(e,t)};var Et=function(e,t,n,o){var a=function(e){return"undefined"!=typeof window&&"undefined"!=typeof document&&document.activeElement===e}(e),c=function(){!a&&n&&e&&!Object(r.j)()&&ie(e,o)&&e.focus()};return Object(i.useEffect)((function(){setTimeout(c,550)}),[e,o,n]),oe(t,c),a},St=function(e){var t=Object(i.useState)(!1),n=d()(t,2),o=n[0],r=n[1],a=Object(i.useRef)();return[o,function(t){r(t),clearTimeout(a.current),t&&(a.current=setTimeout((function(){return r(!1)}),e))}]},xt=n(149);function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var It=function(e){var t=e.blockRef,n=e.isActive,o=e.isFocused,c=e.layoutItemsSize,l=e.onCommitAnswer,s=e.onInputBlur,u=e.onInputFocus,p=e.onRequireStickyFooter,h=e.onStageAnswer,m=e.placeholder,f=e.recenter,v=e.t,g=e.theme,y=e.title,k=e.type,C=e.validations,O=St(600),j=d()(O,2),S=j[0],P=j[1],A=Object(i.useState)(),R=d()(A,2),F=R[0],D=R[1],N=Et(F,t,o,c),B="stkv-text-".concat(t);function L(e){if(n){var o=e.target.value;C.maxLength&&(o=o.slice(0,C.maxLength)),h(t,o)}}var M=e.value.length>0?e.value[0]:"",z=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{title:{text:y,for:B,type:"label"}});return a.a.createElement(ft,w()({isShaking:S},z),a.a.createElement(I.a,{top:4,bottom:2},a.a.createElement(E.a,{placeholder:v(m),maxLength:C.maxLength,onChange:L,onResize:function(e){if(L(e),n&&!Object(Ot.a)()){f("bottom","center",!0)}},onKeyDown:function(e){var o=!!e.shiftKey;Ct(k,e),Object(r.j)()||e.nativeEvent.keyCode!==bt.a.ENTER||o||(Object(xt.a)("block-committed",{method:"key-enter",blockType:k}),F&&F.blur(),e.stopPropagation(),n&&l(t))},onKeyPress:function(e){kt(k,C.maxLength,e).blocked&&P(!0)},onFocus:function(){Object(r.j)()&&(u(),Object(Ot.a)()||setTimeout((function(){f("bottom")}),700))},onBlur:s,innerRef:D,id:B,value:M,color:g.colors.secondary}),!Object(r.j)()&&a.a.createElement(I.a,{top:2},a.a.createElement(x.a,{color:g.colors.secondary,fontWeight:"regular",htmlTag:"p",size:"sizeN2"},Object(T.a)(v("block.longText.hint"))))),a.a.createElement(be,{buttonColor:g.colors.button,helperColor:g.colors.primary,backgroundColor:g.colors.background,onRequireStickyFooter:p,blockRef:t,onClick:function(e){Object(xt.a)("block-committed",{method:"click",blockType:k});var o=N&&Object(r.j)();F&&o&&F.blur(),e.stopPropagation(),setTimeout((function(){n&&l(t)}),o?700:0)},layoutItemsSize:c}))};It.defaultProps={onCommitAnswer:Z.a,onStageAnswer:Z.a,recenter:Z.a,t:Z.a,theme:{colors:{backgroundColor:r.b,button:r.b,primary:r.b,secondary:r.b}},validations:{maxLength:null},value:[]};var At=Object(i.memo)(It,jt),Rt=n(596),Ft=n.n(Rt),Dt=n(633);var Nt=function(e){var t=[40,37,39,38,32,8,13,46,9],n=[48,49,50,51,52,53,54,55,56,57],o=[96,97,98,99,100,101,102,103,104,105],r=!e;return function(e,i,a,c,l,s){if(a=function(e){return" "+e+" "}(a||"-"),i=i||"YYYYMMDD",l=l||!1,!e)return!1;var u="",p=[0,0,0],d=e,h=d.value,m={d:-1,m:-1,y:-1},f=a.length,b="DD".length+f+"MM".length+f+"YYYY".length,v=[],g="",y=function(e,t,n,o){var r=e.addEventListener?"addEventListener":"attachEvent";e[r]("attachEvent"===r?"on".concat(t):t,n,o)},k=function(e,t,n){n=n||u;var o=h.split(a),r=o[m[n]],i=parseInt(r,10),l=(new Date).toISOString();if("reset"===e)switch(n){case"d":r=c.substring(v[m.d][0],v[m.d][1]);break;case"m":r=c.substring(v[m.m][0],v[m.m][1]);break;case"y":r=c.substring(v[m.y][0],v[m.y][1])}else if("overwrite"===e&&"number"==typeof t){if("y"===n){var s=/[^0-9]/g;s.test(r)&&(r=r.replace(s,"0")),r=r.substr(1,3)+t}else 0===i&&0===t?r="01":0===p[m[n]]&&t>=0<=3?r=t:"d"===n&&i<=3||"m"===n&&i<=1?(r=r.charAt(1),("d"===n&&3===i&&t>1||"m"===n&&1===i&&t>2)&&(t="d"===n?1:2),r+=t.toString()):r=t;p[m[n]]++}else if("number"==typeof t&&isNaN(i))switch(n){case"d":r=parseInt(l.substring(8,10),10);break;case"m":r=parseInt(l.substring(5,7),10);break;case"y":r=parseInt(l.substring(0,4),10)}else{if("number"!=typeof t)return;r=i+t,("d"===n&&32===r||"m"===n&&13===r)&&(r=1),"d"===n&&0===r&&(r=31),"m"===n&&0===r&&(r=12)}((r=r.toString()).length<2||"y"===n&&r.length<4)&&(r=R(r)+r),o[m[n]]=r,L(P(o[0],o[1],o[2])),T(0)},C=function(){var e=void 0!==d.selectionStart?d.selectionStart:function(e){e.focus();var t=document.selection.createRange(),n=document.selection.createRange().text.length;return t.moveStart("character",-e.value.length),t.text.length-n}(d),t=E(),n=w(t);B(e>t&&e<=t+"MM".length+f?[t+f,t+"MM".length+f]:e>=n&&e<b?[n,b]:[0,t])},O=function(){var e="",t="";return x()?(t=P(i.substr(0,4),i.substr(4,2),i.substr(6,2)),e=P(c.substr(0,4),c.substr(5,2),c.substr(8,2))):(t=P(i.substr(0,2),i.substr(2,2),i.substr(4,4)),e=P(c.substr(0,2),c.substr(3,2),c.substr(6,4))),g=t,c=e},w=function(e){return b-(6-e)},j=function(e,t){e=e||!1,t=t||u;var n=h.split(a)[m[t]];return"default"===e?"DD"===n||"MM"===n||"YYYY"===n:n},E=function(){return x()?"YYYY".length:"DD".length},S=function(){var e;if(l)e=h;else{var t=h.split(a),n=t[m.y],o=t[m.m],r=t[m.d];e="".concat(n,"-").concat(o,"-").concat(r)}return e},x=function(){return"Y"===i.charAt(0)},P=function(e,t,n){return e+a+t+a+n},I=function(e){e.preventDefault();var i,a=e.keyCode,c=String.fromCharCode(a);if(t.indexOf(a)<0&&n.indexOf(a)<0&&o.indexOf(a)<0)return!1;switch(o.indexOf(a)>-1&&(a-=48,c=String.fromCharCode(a)),e.preventDefault?e.preventDefault():9===a&&(e.shiftKey&&0===m[u]||2===m[u])||(e.returnValue=!1),!0){case 38===a:k("inc",1);break;case 40===a:k("inc",-1);break;case 37===a:case 9===a&&e.shiftKey:T(-1,e);break;case 39===a:case 13===a:case 9===a:case 32===a:T(1,e);break;case 46===a:case 8===a:j("default")?T(-1):(k("reset",0),F());break;default:isNaN(parseInt(c,10))||(k("overwrite",parseInt(c,10)),r&&(i=parseInt(j(),10),("d"===u&&i>3||"m"===u&&i>1||2===p[m[u]]&&"y"!==u||4===p[m[u]])&&T(1)))}return!0},A=function(e){s(e.target.value)},R=function(e){var t="y"===u?"0000":"00";return t.substr(0,t.length-e.length)},F=function(e){p[m[e=e||u]]=0},D=function(){var e=["02","04","06","09","11"],t=parseInt(j(!1,"y"),10),n=j(!1,"m"),o=parseInt(j(!1,"d"),10),r=!isNaN(t)&&1===new Date(t,1,29).getMonth();isNaN(o)||e.indexOf(n)<0||o<29||("02"===n?o=r?29:28:o>30&&(o=30),k("overwrite",o,"d"),F("d"))},N=function(e){var t=new RegExp(" ","g");return e.replace(t,"")},T=function(e,t){var n=""!==u?m[u]+e:0+e;0!==e&&("0000"!==j()&&"00"!==j()||(k("reset"),k("overwrite",1)),F(),D()),r||2!==p[m[u]]||(p[m[u]]=0),n<0?n=0:n>2?n=2:t&&t.stopPropagation&&t.stopPropagation(),B(n)},B=function(e){var t,n,o,r,i;if(!Array.isArray(e)&&"number"!=typeof e)return console.error("invalid set to focus"),!1;t=Array.isArray(e)?e:v[e],u=g.substring(t[0],t[0]+1).toLowerCase(),d.setSelectionRange?d.setSelectionRange(t[0],t[1]):(n=d,o=t[0],r=t[1],(i=Dt({node:n})).setSelection(0),i.setSelection(o,r),i.setSelection({start:o,end:r}),i.getSelection())},L=function(e){e=e||O(),h=d.value=e;var t=S();s(t,new Date(t).getTime())};return{focus:function(){l||(e.focus(),B([0,E()]))},blur:function(){l||e.blur()},destroy:function(){l?d.removeEventListener("change",A,!0):(d.removeEventListener("click",C,!0),d.removeEventListener("keydown",I,!0))},render:function(){return 8===i.length&&(function(){var e=a.length,t=E(),n=t+e,o=n+"MM".length,r=w(t);x()?(m.y=0,m.m=1,m.d=2):("M"===i.charAt(0)?(m.m=0,m.d=1):(m.d=0,m.m=1),m.y=2),v.push([0,t]),v.push([n,o]),v.push([r,b])}(),l?(d.setAttribute("min","0001-01-01"),d.setAttribute("max","9999-12-31"),d.setAttribute("data-placeholder",O()),y(d,"change",A,!0)):(d.setAttribute("onCut","return false;"),d.setAttribute("onPaste","return false;"),y(d,"click",C,!0),y(d,"keydown",I,!0)),L(),this)},value:function(e){return e?S():N(h)},setValue:L,test:{_keyBehaviour:I,_setFocusOnSubfield:T}}}},Tt=function(e){function t(){var e;return Be()(this,t),(e=_e()(this,We()(t).call(this))).handleFocus=e.handleFocus.bind(Ke()(e)),e.handleBlur=e.handleBlur.bind(Ke()(e)),e.handleRef=e.handleRef.bind(Ke()(e)),e.dateFieldFactory=Nt(),e.dateFieldInstance=null,e}return Ye()(t,e),Me()(t,[{key:"enhanceInputWithDateLogic",value:function(){this.dateFieldInstance&&this.dateFieldInstance.destroy(),this.dateFieldInstance=null;var e=this.props,t=e.separator,n=e.structure,o=e.placeholder,r=e.onChange,i=this.dateFieldFactory(this.input,n,t,o,!1,(function(e){return r({target:{value:e}})}));this.dateFieldInstance=i.render()}},{key:"handleFocus",value:function(){this.dateFieldInstance.focus()}},{key:"handleBlur",value:function(){this.dateFieldInstance.blur()}},{key:"handleRef",value:function(e){this.input=e,this.props.getInputRef(e)}},{key:"componentDidMount",value:function(){this.enhanceInputWithDateLogic()}},{key:"componentDidUpdate",value:function(e){var t=e.separator!==this.props.separator,n=e.structure!==this.props.structure;(t||n||this.props.resetValue)&&this.enhanceInputWithDateLogic()}},{key:"render",value:function(){var e=this.props,t=e.color,n=e.inputId,o=e.onChange,r=e.onKeyDown,i=e.onKeyPress,c=e.placeholder,l=e.value;return a.a.createElement(Ft.a,{value:l,inputId:n,color:t,onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:o,onKeyDown:r,onKeyPress:i,placeholder:c,getRef:this.handleRef,type:"text"})}}]),t}(i.Component);Tt.defaultProps={onChange:Z.a,onKeyDown:Z.a,onKeyPress:Z.a};var Bt=Tt;function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var Mt=c.c.div.withConfig({displayName:"DateBlock__InputWrapper",componentId:"trp8gr-0"})(["position:relative;"]),zt=c.c.input.withConfig({displayName:"DateBlock__GhostInput",componentId:"trp8gr-1"})(["position:absolute;width:100%;height:100%;top:0;opacity:0;min-width:100%;"]),_t={MMDDYYYY:"MM-DD-YYYY",DDMMYYYY:"DD-MM-YYYY",YYYYMMDD:"YYYY-MM-DD"},Ht={DD:"block.date.placeholder.day",MM:"block.date.placeholder.month",YYYY:"block.date.placeholder.year"},Wt=function(e,t,n){var o=_t[e];return e&&t&&o?o.replace(/-/g,t).split(t).map((function(e){return n(Ht[e])})).join(t):""},Vt=function(e){function t(){var e,n;Be()(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];var a=(n=_e()(this,(e=We()(t)).call.apply(e,[this].concat(r)))).props,c=a.blockRef,l=a.structure,s=a.separator,u=a.t;return n.handleCommit=n.handleCommit.bind(Ke()(n)),n.handleChange=n.handleChange.bind(Ke()(n)),n.handleFocus=n.handleFocus.bind(Ke()(n)),n.handleBlur=n.handleBlur.bind(Ke()(n)),n.handleKeyDown=n.handleKeyDown.bind(Ke()(n)),n.handleScroll=n.handleScroll.bind(Ke()(n)),n.inputId="stkv-text-".concat(c),n.state={isGhostInputFocused:!1,placeholder:Wt(l,s,u)},n}return Ye()(t,e),Me()(t,[{key:"componentDidMount",value:function(){this.updateInputFocus(this.dateInput,this.props.isFocused)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.structure,o=t.separator,r=t.t;e.structure===n&&e.separator===o||this.setState({placeholder:Wt(e.structure,e.separator,r)})}},{key:"shouldComponentUpdate",value:function(e){return wt(this.props,e)}},{key:"componentDidUpdate",value:function(){this.updateInputFocus(this.dateInput,this.props.isFocused)}},{key:"handleKeyDown",value:function(e){switch(e.keyCode){case bt.a.ARDOWN:case bt.a.ARUP:e.stopPropagation();break;case bt.a.ENTER:this.handleCommit(e)}}},{key:"handleCommit",value:function(e){e.stopPropagation(),this.props.isActive&&this.props.onCommitAnswer(this.props.blockRef)}},{key:"handleChange",value:function(e){var t=this,n=e.target.value,o=n.replace(/[.-/]/gi,"");this.props.isActive&&this.props.onStageAnswer(this.props.blockRef,o.match(/[0-9]/gi)?n:""),Object(r.j)()&&!Object(Ot.a)()&&n&&setTimeout((function(){t.props.isActive&&t.props.onCommitAnswer(t.props.blockRef),t.ghostInput.blur()}),550)}},{key:"handleFocus",value:function(){Object(Ot.a)()&&(this.setState({isGhostInputFocused:!0}),this.props.onInputFocus())}},{key:"handleBlur",value:function(){Object(Ot.a)()&&(this.setState({isGhostInputFocused:!1}),this.props.onInputBlur())}},{key:"handleScroll",value:function(){this.props.isActive&&this.updateInputFocus(this.dateInput,this.props.isFocused)}},{key:"updateInputFocus",value:function(e,t){!Object(r.j)()&&t&&ie(e,this.props.layoutItemsSize)&&e.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.isFocused,o=t.structure,i=t.separator,c=t.value,l=void 0===c?[]:c,s=t.title,u=t.theme,p=t.t,d=t.onRequireStickyFooter,h=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props,{title:{text:s,for:this.inputId,type:"label"}}),m=this.state.placeholder,f=function(e,t,n){if(!e||!e[0])return"";var o=e[0].split("-");return t.replace(n(Ht.YYYY),o[0]).replace(n(Ht.MM),o[1]).replace(n(Ht.DD),o[2])}(l,m,p),v=Object(Ot.a)()&&this.state.isGhostInputFocused;return a.a.createElement(ft,w()({},h,{onScroll:this.handleScroll}),a.a.createElement(I.a,{top:4,bottom:2},Object(r.j)()?a.a.createElement(Mt,null,a.a.createElement(Ft.a,{placeholder:m,color:u.colors.secondary,value:f,onChange:Z.a}),a.a.createElement(zt,{type:"date",ref:function(t){return e.ghostInput=t},onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleChange})):a.a.createElement(Bt,{getInputRef:function(t){return e.dateInput=t},color:u.colors.secondary,placeholder:m,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onKeyPress:this.props.onKeyPress,inputId:this.inputId,isFocused:n,structure:o,separator:i,resetValue:this.props.shouldClearInput})),a.a.createElement(be,{buttonColor:u.colors.button,helperColor:u.colors.primary,backgroundColor:u.colors.background,onRequireStickyFooter:d,blockRef:this.props.blockRef,onClick:this.handleCommit,layoutItemsSize:this.props.layoutItemsSize,hideButton:v}))}}]),t}(i.Component);Vt.defaultProps={onCommitAnswer:Z.a,onInputBlur:Z.a,onInputFocus:Z.a,onKeyDown:Z.a,onKeyPress:Z.a,onRequireStickyFooter:Z.a,onStageAnswer:Z.a,theme:{colors:{secondary:r.b}},t:Z.a};var Kt=n(5),qt=n.n(Kt),Yt=n(37),Ut=n.n(Yt),Gt=n(634),Qt=n.n(Gt),Xt=n(218),Zt=n.n(Xt);function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var en=c.c.div.withConfig({displayName:"TopDownFocusable__Focusable",componentId:"w6x6xw-0"})(["outline:none;min-height:1px;margin-top:-1px;"]),tn=function(e){function t(){return Be()(this,t),_e()(this,We()(t).apply(this,arguments))}return Ye()(t,e),Me()(t,[{key:"tryFocus",value:function(){var e=this.topFocusableRef&&this.bottomFocusableRef&&this.focusableRef,t=document.activeElement===this.focusableRef||document.activeElement===this.topFocusableRef||document.activeElement===this.bottomFocusableRef,n=ie(this.topFocusableRef,$t({},this.props.layoutItemsSize)),o=ie(this.bottomFocusableRef,$t({},this.props.layoutItemsSize));return!!t||!!e&&(n?(this.topFocusableRef.focus(),!0):!!o&&(this.bottomFocusableRef.focus(),!0))}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){return e.tryFocus()}),600)}},{key:"componentDidUpdate",value:function(){var e=this;this.props.shouldFocus&&(this.tryFocus()||setTimeout((function(){return e.tryFocus()}),600))}},{key:"render",value:function(){var e=this,t=this.props,n=t.onKeyDown,o=t.children;return a.a.createElement(en,{tabIndex:"-1",ref:function(t){return e.focusableRef=t},onKeyDown:n,"data-qa":"focusable"},a.a.createElement(en,{tabIndex:"-1",ref:function(t){return e.topFocusableRef=t}}),o,a.a.createElement(en,{tabIndex:"-1",ref:function(t){return e.bottomFocusableRef=t}}))}}]),t}(i.Component),nn=n(101),on=function(e){var t=e.color;return a.a.createElement("svg",{height:"50px",width:"50px",viewBox:"0 0 50 50"},a.a.createElement("g",{fill:t,fillRule:"nonzero"},a.a.createElement("path",{d:"M25 0a25 25 0 1 0 0 50 25 25 0 0 0 0-50zm0 46a21 21 0 1 1 0-42 21 21 0 0 1 0 42z"}),a.a.createElement("path",{d:"M35 23h-8v-8h-4v8h-8v4h8v8h4v-8h8v-4z"})))},rn=Object(c.d)(["from{opacity:0;}to{opacity:1;}"]),an=Object(c.b)(["animation:"," 0.8s ease forwards;"],rn),cn=c.c.div.withConfig({displayName:"DropArea__Root",componentId:"sc-1htx8qv-0"})(["position:fixed;top:","px;left:","px;height:","px;width:","px;display:flex;align-items:center;justify-content:center;z-index:",";overflow:hidden;"],(function(e){return e.boundingClientRect.top}),(function(e){return e.boundingClientRect.left}),(function(e){return e.boundingClientRect.height}),(function(e){return e.boundingClientRect.width}),Oe.j.level5),ln=c.c.div.withConfig({displayName:"DropArea__TextWrapper",componentId:"sc-1htx8qv-1"})(["position:relative;",";display:flex;flex-direction:column;align-items:center;pointer-events:none;"],an),sn=Object(c.d)(["from{transform:translateX(-50%) translateY(-50%) scale(0);opacity:1;}to{transform:translateX(-50%) translateY(-50%) scale(1);opacity:0.8;}"]),un=Object(c.b)(["animation:"," 0.8s cubic-bezier(0.165,0.84,0.44,1) forwards 0.02s;"],sn),pn=c.c.div.withConfig({displayName:"DropArea__Circle",componentId:"sc-1htx8qv-2"})(["position:absolute;pointer-events:none;top:","px;left:","px;width:","px;height:","px;&::before{content:'';width:100%;height:100%;transform-origin:50% 50%;position:absolute;border-radius:50%;background:",";"," opacity:0;}"],(function(e){return e.posY}),(function(e){return e.posX}),(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.color}),un),dn=function(e){function t(){var e;return Be()(this,t),(e=_e()(this,We()(t).call(this))).state={dragging:!1,showCircle:!1,circlePos:{x:0,y:0}},e.handleGlobalDragEnter=e.handleGlobalDragEnter.bind(Ke()(e)),e.handleDrop=e.handleDrop.bind(Ke()(e)),e.handleDragLeave=e.handleDragLeave.bind(Ke()(e)),e.handleDragOver=e.handleDragOver.bind(Ke()(e)),e}return Ye()(t,e),Me()(t,[{key:"handleGlobalDragEnter",value:function(e){var t=this;this.props.active&&(e.preventDefault(),this.setState({dragging:!0}),clearTimeout(this.danglingDragRemoveTimeout),this.danglingDragRemoveTimeout=setTimeout((function(){return t.clearState()}),3e3))}},{key:"componentDidMount",value:function(){document.addEventListener("dragenter",this.handleGlobalDragEnter,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("dragenter",this.handleGlobalDragEnter,!1)}},{key:"clearState",value:function(){this.setState({dragging:!1,showCircle:!1,circlePos:{x:0,y:0}})}},{key:"handleDrop",value:function(e){e.preventDefault(),e.stopPropagation(),this.clearState(),this.props.active&&this.props.onDrop(e)}},{key:"handleDragLeave",value:function(e){e.preventDefault(),this.clearState()}},{key:"handleDragOver",value:function(e){clearTimeout(this.danglingDragRemoveTimeout),e.preventDefault(),e.stopPropagation(),!1===this.state.showCircle&&this.setState({showCircle:!0,circlePos:{x:e.clientX-this.props.boundingClientRect.left,y:e.clientY-this.props.boundingClientRect.top}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.active,o=t.textColor,r=t.backgroundColor,i=t.boundingClientRect;return n&&this.state.dragging?a.a.createElement(cn,{onDrop:this.handleDrop,onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,boundingClientRect:i},this.state.showCircle&&a.a.createElement(ke.ResponsiveConsumer,null,(function(t){var n=t.width,o=t.height;return a.a.createElement(pn,{size:2*Math.sqrt(Math.pow(n,2)+Math.pow(o,2)),posX:e.state.circlePos.x,posY:e.state.circlePos.y,color:r})})),a.a.createElement(ln,null,a.a.createElement(on,{color:o}),a.a.createElement(I.a,{top:2},a.a.createElement(x.a,{size:"sizeN1",fontWeight:"bold",color:o},this.props.dropText)))):null}}]),t}(i.PureComponent);dn.defaultProps={onDrop:function(){},textColor:"#FFFFFF",backgroundColor:"#000000",dropText:""};var hn=dn,mn=function(e){var t=e.color;return a.a.createElement("svg",{style:{display:"block"},width:"92px",height:"68px",viewBox:"0 0 92 68"},a.a.createElement("path",{d:"M46 .64a27.9 27.9 0 0 1 19.78 8.19 27.78 27.78 0 0 1 8.03 20A19.95 19.95 0 0 1 92 48.63c0 11.04-8.97 20-20 20H23c-12.67 0-23-10.33-23-23a22.94 22.94 0 0 1 18.63-22.46 27.79 27.79 0 0 1 7.56-14.34A27.97 27.97 0 0 1 46 .63zm0 6c-5.64 0-11.26 2.1-15.56 6.4-3.66 3.66-5.96 10.59-6.51 15.34 0 .06.2.06-2.5.32A17.02 17.02 0 0 0 6 45.64c0 9.42 7.58 17 17 17h49c7.8 0 14-6.2 14-14 0-7.81-6.2-14-14-14H67.12v-3.36c0-10.7-1.43-14.1-5.59-18.24-4.32-4.3-9.9-6.4-15.53-6.4z",fill:t,fillRule:"nonzero"}))},fn=function(e){var t=e.color;return a.a.createElement("svg",{width:"26px",height:"60px",viewBox:"0 0 26 31"},a.a.createElement("path",{d:"M13 .53l-2.03 1.89-11 10 4.06 4.44L10 11.42v19.22h6V11.42l5.97 5.44c.03.02 4.06-4.44 4.06-4.44l-11-10c-.4-.36-1.07-1-2.03-1.9z",fill:t,fillRule:"nonzero"}))},bn=Object(c.d)(["from{transform:translateY(0%);}to{transform:translateY(-60px);}"]),vn=Object(c.b)(["animation:"," 1.2s cubic-bezier(0.68,0.27,0.36,0.77) infinite;"],bn),gn=c.c.div.withConfig({displayName:"cloud-upload-icon__Root",componentId:"tj7qoc-0"})(["position:relative;"]),yn=c.c.div.withConfig({displayName:"cloud-upload-icon__ArrowWrapper",componentId:"tj7qoc-1"})(["",";display:flex;flex-direction:column;"],(function(e){return e.animated&&vn})),kn=c.c.div.withConfig({displayName:"cloud-upload-icon__ArrowClipper",componentId:"tj7qoc-2"})(["top:0;left:0;position:absolute;overflow:hidden;border-radius:10px 10px 0 0;left:32px;top:2px;bottom:2px;"]),Cn=function(e){var t=e.color,n=e.dimmed,o=e.animated;return n&&(t=Object(r.t)(t)),a.a.createElement(gn,null,a.a.createElement(mn,{color:t}),a.a.createElement(kn,null,a.a.createElement(yn,{animated:o},a.a.createElement(fn,{color:t}),a.a.createElement(fn,{color:t}))))},On=n(610),wn=n(55),jn=function(e){var t=e.color;return a.a.createElement("svg",{width:"57px",heifht:"69px",viewBox:"0 0 57 69"},a.a.createElement("path",{d:"M36.7 0H0v69h57V20L36.7 0zM38 7.9L49 18.5H38V7.8zM4.7 64.4V4.6h28.8v18.6h18.9v41.2H4.7z",fill:t,fillRule:"nonzero"}))},En=Object(c.d)(["from{transform:scale(0.7);opacity:0.01;}to{transform:scale(1);opacity:1;}"]),Sn=Object(c.b)(["animation:"," 0.2s ease forwards;"],En),xn=Object(c.d)(["from{transform:scale(1);opacity:1;}to{transform:scale(0.7);opacity:0.01;}"]),Pn=Object(c.b)(["animation:"," 0.2s ease forwards;"],xn),In=c.c.div.withConfig({displayName:"uploaded-file-preview__UnknownFileExtensionPlaceholderWrapper",componentId:"mx06qv-0"})(["height:200px;width:",";display:flex;align-items:center;justify-content:center;background:",";"],(function(e){return e.fullWidth?"100%":"200px"}),(function(e){return Object(r.t)(e.color)})),An=c.c.div.withConfig({displayName:"uploaded-file-preview__FilePreviewWrapper",componentId:"mx06qv-1"})(["width:",";margin:",";display:flex;align-items:center;flex-direction:column;max-width:100%;transition:all 0.2s ease;",";"],(function(e){return e.fullWidth?"100%":"auto"}),(function(e){return e.fullWidth?"none":"0 20px"}),(function(e){return e.visible?Sn:Pn})),Rn=c.c.div.withConfig({displayName:"uploaded-file-preview__FilePreview",componentId:"mx06qv-2"})(["border:1px solid ",";border-bottom:none;border-radius:3px 3px 0 0;width:100%;"],(function(e){return e.color})),Fn=c.c.div.withConfig({displayName:"uploaded-file-preview__FileFooter",componentId:"mx06qv-3"})(["border:1px solid ",";border-radius:0 0 3px 3px;width:100%;padding:6px 12px;"],(function(e){return e.color})),Dn=c.c.img.withConfig({displayName:"uploaded-file-preview__ImagePreview",componentId:"mx06qv-4"})(["height:",";width:",";display:block;max-width:100%;object-fit:cover;"],(function(e){return e.fullWidth?"auto":"200px"}),(function(e){return e.fullWidth?"100%":"auto"})),Nn=c.c.div.withConfig({displayName:"uploaded-file-preview__FileNameDeleteWrapper",componentId:"mx06qv-5"})(["display:flex;justify-content:space-between;"]),Tn=c.c.div.withConfig({displayName:"uploaded-file-preview__DeleteFileWrapper",componentId:"mx06qv-6"})(["cursor:pointer;display:flex;align-items:center;justify-content:center;"]),Bn=c.c.div.withConfig({displayName:"uploaded-file-preview__FileNameWrapper",componentId:"mx06qv-7"})(["width:1px;min-width:1px;flex:1;display:flex;align-items:center;"]),Ln=function(e){function t(e){var n;return Be()(this,t),(n=_e()(this,We()(t).call(this,e))).state={visible:!0},n.handleCancel=n.handleCancel.bind(Ke()(n)),n}return Ye()(t,e),Me()(t,[{key:"handleCancel",value:function(){this.setState({visible:!1}),setTimeout(this.props.onCancel,200)}},{key:"render",value:function(){var e=function(e){var t=e.split("."),n=t.pop();return[t.join("."),n]}(this.props.originalFileName),t=d()(e,2),n=t[0],o=t[1];return a.a.createElement(An,{visible:this.state.visible,fullWidth:"sm"===this.props.breakpoint},a.a.createElement(Rn,{color:this.props.theme.colors.secondary},null!=this.props.fileBlob?a.a.createElement(Dn,{fullWidth:"sm"===this.props.breakpoint,src:this.props.fileBlob,alt:"Uploaded image"}):a.a.createElement(In,{fullWidth:"sm"===this.props.breakpoint,color:this.props.theme.colors.secondary},a.a.createElement(jn,{color:this.props.theme.colors.secondary}))),a.a.createElement(Fn,{color:this.props.theme.colors.secondary},a.a.createElement(Nn,null,a.a.createElement(Bn,null,a.a.createElement(x.a,{size:"sizeN2",align:"center",color:this.props.theme.colors.primary,ellipsis:!0},n,"."),a.a.createElement(x.a,{size:"sizeN2",align:"center",color:this.props.theme.colors.primary},o)),a.a.createElement(I.a,{left:1}),a.a.createElement(Tn,{onClick:this.handleCancel},a.a.createElement(wn.b,{svg:On.a,color:this.props.theme.colors.primary})))))}}]),t}(i.PureComponent);function Mn(e){return new Promise((function(t,n){var o=new window.FileReader;o.onload=function(e){return t(e.target.result)},o.onerror=n,o.readAsDataURL(e)}))}var zn=["image/png","image/gif","image/jpeg","image/svg+xml"],_n=function(e){return zn.some((function(t){return e===t}))},Hn="UPLOADING",Wn="PREVIEW",Vn="INPUT",Kn=c.c.input.withConfig({displayName:"FileUpload__FileInput",componentId:"sc-18jtzv9-0"})(["position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);"]),qn=c.c.label.withConfig({displayName:"FileUpload__InputLabel",componentId:"sc-18jtzv9-1"})(["width:100%;height:100%;display:flex;align-items:center;justify-content:center;cursor:pointer;"]),Yn=c.c.div.withConfig({displayName:"FileUpload__Wrapper",componentId:"sc-18jtzv9-2"})(["border:",";background:",";height:",";border-radius:3px;display:flex;align-items:center;justify-content:center;position:relative;transition:background 0.1s ease;"],(function(e){return e.visible?"1px dashed ".concat(e.color):"none"}),(function(e){return e.hovered?Object(r.t)(e.color):Object(r.u)(e.color)}),(function(e){return e.visible?"300px":"auto"})),Un=function(e){var t=e.t,n=e.uploadProgress,o=e.theme;return a.a.createElement(D.a,{vertical:!0,align:"center"},a.a.createElement(Cn,{color:o.colors.secondary,animated:!0}),a.a.createElement(I.a,{top:2}),a.a.createElement(Qt.a,{value:n,color:o.colors.secondary}),a.a.createElement(I.a,{top:1}),a.a.createElement(x.a,{size:"sizeN1",align:"center",color:o.colors.primary},t("block.fileUpload.uploading")))},Gn=function(e){var t=e.t,n=e.inputId,o=e.theme,i=e.handleChange;return a.a.createElement(qn,{htmlFor:n},a.a.createElement(D.a,{vertical:!0,align:"center"},a.a.createElement(Cn,{color:o.colors.secondary,dimmed:!0}),a.a.createElement(I.a,{top:2}),a.a.createElement("div",null,a.a.createElement(x.a,{size:"sizeN1",fontWeight:"bold",color:o.colors.secondary,inline:!0},Object(T.a)(t("block.fileUpload.choose"))," "),!Object(r.j)()&&a.a.createElement(x.a,{size:"sizeN1",color:o.colors.primary,inline:!0},Object(T.a)(t("block.fileUpload.drag")))),a.a.createElement(I.a,{top:1}),a.a.createElement(x.a,{size:"sizeN2",align:"center",color:o.colors.primary},t("block.fileUpload.hintSize"))),a.a.createElement(Kn,{type:"file",id:n,onChange:i}))},Qn=function(e){var t=e.t,n=e.phase,o=e.uploadProgress,r=e.theme,i=e.handleChange,c=e.blockRef,l=e.originalFileName,s=e.fileBlob,u=e.handleCancel,p=e.breakpoint;return n===Hn?a.a.createElement(Un,{t:t,uploadProgress:o,theme:r}):n===Vn?a.a.createElement(Gn,{t:t,theme:r,handleChange:i,inputId:"stkv-text-".concat(c)}):n===Wn?a.a.createElement(Ln,{theme:r,originalFileName:l,fileBlob:s,onCancel:u,breakpoint:p}):void 0},Xn=function(e){var t=e.t,n=e.breakpoint,o=e.theme,r=e.layoutItemsSize,c=e.isFocused,l=e.onRequireStickyFooter,s=e.isActive,u=e.onCommitAnswer,p=e.blockRef,h=e.onStageAnswer,m=e.value,f=Object(i.useState)(),b=d()(f,2),v=b[0],g=b[1],y=Object(i.useState)(!1),k=d()(y,2),C=k[0],O=k[1],w=Object(i.useState)(0),j=d()(w,2),E=j[0],S=j[1],x=m&&m.length>0?m[0]:void 0,P=C?Hn:x?Wn:Vn,A=function(e){e.stopPropagation(),s&&u(p)},R=function(){h(p,null)},F=function(e){var t=e.target.files;t.length&&L(t[0])},D=function(e){S(e)},N=function(e){h(p,{value:e,label:e.name}),O(!1)},B=function(e){O(!1);var t=e&&e.message;g("file-size-exceeded"===t?"label.error.sizeLimit":"label.error.upload")},L=function(){var e=Ut()(qt.a.mark((function e(t){return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),B(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var t=Ut()(qt.a.mark((function t(n){var o,r,i,a,c;return qt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O(!0),S(0),g(null),o=e.formId,r=e.id,t.next=6,Object(nn.c)(o,r);case 6:if(i=t.sent,!(n.size>i.maxSize)){t.next=9;break}throw new Error("file-size-exceeded");case 9:return t.next=11,Object(nn.f)(n,i,D);case 11:if(a=t.sent,!_n(n.type)){t.next=18;break}return t.next=15,Mn(n);case 15:t.t0=t.sent,t.next=19;break;case 18:t.t0=null;case 19:c=t.t0,N({name:n.name,type:n.type,s3Filename:a,blob:c});case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return a.a.createElement(ft,e,a.a.createElement(I.a,{top:4},a.a.createElement(tn,{shouldFocus:c,layoutItemsSize:r,onKeyDown:function(e){e.nativeEvent.keyCode===bt.a.ENTER&&A(e)},"data-qa":"focusable"},a.a.createElement(Zt.a,null,(function(e){var r=e.hovered;return a.a.createElement(Yn,{visible:"sm"!==n||P!==Wn,color:o.colors.secondary,hovered:r&&P===Vn},a.a.createElement(Qn,{t:t,phase:P,uploadProgress:E,theme:o,handleChange:F,blockRef:p,originalFileName:x&&x.name,fileBlob:x&&x.blob,handleCancel:R,breakpoint:n}))})),a.a.createElement(hn,{textColor:o.colors.background,backgroundColor:o.colors.secondary,boundingClientRect:r.boundingClientRect,active:s&&P===Vn,onDrop:function(e){var t=e.dataTransfer.files;L(t[0])},dropText:Object(T.a)(t("block.fileUpload.dropFiles"))}),a.a.createElement(I.a,{top:2},a.a.createElement(be,{buttonColor:o.colors.button,helperColor:o.colors.primary,backgroundColor:o.colors.background,onRequireStickyFooter:l,blockRef:p,onClick:A,layoutItemsSize:r,customError:v})))))};Xn.defaultProps={breakpoint:"md",file:{},onCommitAnswer:Z.a,onRequireStickyFooter:Z.a,onStageAnswer:Z.a,t:function(e){return e},theme:{colors:{primary:"#FF00FF",secondary:"#FF00FF"}}};var Zn=Object(ke.withBreakpoint)(Xn),Jn=n(48),$n=n.n(Jn),eo=n(704),to=n(638),no=n(707),oo=function(e){var t=e.color,n=e.maxSelection,o=e.minSelection,r=e.selectionCount,i=e.t;return a.a.createElement(I.a,{bottom:2},a.a.createElement(x.a,{color:t,fontWeight:"regular",htmlTag:"p",size:"size0"},Object(T.a)(i(function(e){var t=e.t,n=e.minSelection,o=e.maxSelection,r=e.selectionCount;return n||o?!n&&o?function(e,t,n){return 0===n?e("block.multipleChoice.selectionLimit.hint.selectUpToX",{x:t}):t===n?e("block.multipleChoice.selectionLimit.hint.noMore"):e("block.multipleChoice.selectionLimit.hint.selectUpToXMore",{x:t-n})}(t,o,r):n&&!o?function(e,t,n){return 0===n?e("block.multipleChoice.selectionLimit.hint.selectAtLeastX",{x:t}):t<=n?e("block.multipleChoice.selectionLimit.hint.noMore"):e("block.multipleChoice.selectionLimit.hint.selectAtLeastXMore",{x:t-n})}(t,n,r):n===o?function(e,t,n){return 0===n?e("block.multipleChoice.selectionLimit.hint.selectXchoices",{x:t}):t===n?e("block.multipleChoice.selectionLimit.hint.noMore"):e("block.multipleChoice.selectionLimit.hint.selectXMore",{x:t-n})}(t,n,r):n!==o?function(e,t,n,o){return 0===o?e("block.multipleChoice.selectionLimit.hint.selectXYchoices",{x:t,y:n}):o<t?e("block.multipleChoice.selectionLimit.hint.selectAtLeastXMore",{x:t-o}):o>=t&&o<n?e("block.multipleChoice.selectionLimit.hint.selectUpToXMore",{x:n-o}):o===n?e("block.multipleChoice.selectionLimit.hint.noMore"):void 0}(t,n,o,r):void 0:function(e){return e("block.multipleChoice.hint")}(t)}({t:i,minSelection:o,maxSelection:n,selectionCount:r})))))};oo.defaultProps={t:function(e){return e}};var ro=Object(N.a)(oo);function io(e){return bt.a.A<=e&&e<=bt.a.Z}var ao="ABCDEFGHIJKLMNOPQRSTUVWXYZ",co=function(e){var t=Math.floor(e%ao.length);return ao[t]};var lo=function e(t){return t>=ao.length?e(Math.floor(t/ao.length)-1)+co(t):co(t)};function so(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var uo=c.c.div.withConfig({displayName:"MultipleChoice__Hidden",componentId:"jizsn7-0"})(["opacity:0;pointer-events:none;position:absolute;height:1px;overflow-y:scroll;"]),po=g()(JSON.stringify,(function(e){var t=e.choices,n=e.t;return t.map((function(e){return{label:n(e.label),ref:e.ref}}))})),ho=function(e){function t(){return Be()(this,t),_e()(this,We()(t).apply(this,arguments))}return Ye()(t,e),Me()(t,[{key:"render",value:function(){var e=this.props,t=e.choices,n=e.allowOtherChoice,o=e.otherValue,r=e.vertical;return a.a.createElement(i.Fragment,null,t.map((function(e){return a.a.createElement(eo.b,{title:e.label,key:e.ref,keyHelperLetter:"MM"})})),n&&r&&a.a.createElement(eo.b,{title:o,keyHelperLetter:"MM"}))}}]),t}(i.PureComponent),mo=function(e){function t(e){var n;return Be()(this,t),n=_e()(this,We()(t).call(this,e)),b()(Ke()(n),"getBlockNode",(function(e){return n.blockNode=e})),b()(Ke()(n),"getHiddenListRef",(function(e){return n.hiddenListRef=e})),n.state={keyboardHoveredIndex:-1,editingOtherChoice:!1,longestChoiceWidth:null,otherValue:n.getOtherValue()},n.renderedColumns=1,n.firstCharacterShortcuts=[],n.handleSelect=n.handleSelect.bind(Ke()(n)),n.handleCommitAnswer=n.handleCommitAnswer.bind(Ke()(n)),n.handleKeyDown=n.handleKeyDown.bind(Ke()(n)),n.handleOtherChoiceClick=n.handleOtherChoiceClick.bind(Ke()(n)),n.handleOtherChoiceCommit=n.handleOtherChoiceCommit.bind(Ke()(n)),n.handleOtherChoiceChange=n.handleOtherChoiceChange.bind(Ke()(n)),n.handleOtherChoiceBlur=n.handleOtherChoiceBlur.bind(Ke()(n)),n.handleOtherChoiceKeyDown=n.handleOtherChoiceKeyDown.bind(Ke()(n)),n.handleColumnsChanged=n.handleColumnsChanged.bind(Ke()(n)),n}return Ye()(t,e),Me()(t,[{key:"componentDidMount",value:function(){this.updateLongestChoiceWidth()}},{key:"componentWillReceiveProps",value:function(e){var t=this.state.keyboardHoveredIndex>=0;this.props.isActive&&e.isActive||t&&this.setState({keyboardHoveredIndex:-1})}},{key:"shouldComponentUpdate",value:function(e,t){return wt(this.props,e)||this.state.longestChoiceWidth!==t.longestChoiceWidth||e.choices!==this.props.choices}},{key:"componentDidUpdate",value:function(e){if(this.props.isActive){e.choices.length!==this.props.choices.length&&this.props.recenter(),this.updateLongestChoiceWidth()}else{var t=e.theme,n=this.props.theme;!t.isFontLoaded&&n.isFontLoaded&&this.updateLongestChoiceWidth()}}},{key:"getChoicesLength",value:function(){var e=this.props,t=e.choices;return e.allowOtherChoice?t.length+1:t.length}},{key:"getOtherValue",value:function(){var e=this.props,t=e.choices,n=e.value;return n&&n.find((function(e){return!function(e){return t.map((function(e){return e.ref})).includes(e)}(e)}))}},{key:"getOtherChoiceRef",value:function(){return"".concat(this.props.blockRef,"-other")}},{key:"getPositionRef",value:function(e){if(this.props.allowOtherChoice&&e===this.getChoicesLength()-1)return this.getOtherChoiceRef();var t=this.props.choices[e];return t?t.ref:void 0}},{key:"updateLongestChoiceWidth",value:function(){if(this.hiddenListRef){var e=this.props.longestChoiceWidth||this.hiddenListRef.clientWidth;e!==this.state.longestChoiceWidth&&this.setState({longestChoiceWidth:e})}}},{key:"createKeyShortcut",value:function(e,t,n){var o=this.props.keyboardShortcutType;if("letter"===o)return lo(e);if("firstCharacter"===o){var r=t.charAt(0).toUpperCase();return this.firstCharacterShortcuts.push(r),r}return"custom"===o?this.props.t(n):void 0}},{key:"handleOtherChoiceChange",value:function(e){(e.preventDefault(),e.stopPropagation(),Object(r.j)()&&!Object(Ot.a)())&&(0,this.props.recenter)("bottom","bottom");this.setState({otherValue:e.target.value})}},{key:"handleLetterKeyboardShortcut",value:function(e){var t=e-bt.a.A;this.handleKeyboardSelect(t)}},{key:"handleFirstCharacterShortcut",value:function(e){var t=this.firstCharacterShortcuts.findIndex((function(t){return String.fromCharCode(e)===t}));this.handleKeyboardSelect(t)}},{key:"handleCustomCharacterShortcut",value:function(e){var t=this.props,n=t.choices,o=t.t,r=n.find((function(t){var n=t.keyboardShortcut;return o(n)===String.fromCharCode(e)}));r&&this.handleSelect(r.ref)}},{key:"handleKeyDown",value:function(e){var t=e.keyCode,n=this.props.keyboardShortcutType,o={};if("letter"===n&&io(t))return this.handleLetterKeyboardShortcut(t),e.preventDefault(),void e.stopPropagation();if("firstCharacter"===n&&io(t))return this.handleFirstCharacterShortcut(t),e.preventDefault(),void e.stopPropagation();if("custom"===n&&io(t))return this.handleCustomCharacterShortcut(t),e.preventDefault(),void e.stopPropagation();(o[bt.a.SPACE]=this.handleSelectHovered,o[bt.a.ENTER]=this.handleSelectHovered,this.props.verticalAlignment?(o[bt.a.ARDOWN]=this.hoverNextStep,o[bt.a.ARUP]=this.hoverPreviousStep):(o[bt.a.ARRIGHT]=this.hoverNextStep,o[bt.a.ARLEFT]=this.hoverPreviousStep,o[bt.a.ARDOWN]=this.hoverNextRow,o[bt.a.ARUP]=this.hoverPreviousRow),o[t])&&(o[t].call(this,e)||(e.preventDefault(),e.stopPropagation()))}},{key:"handleOtherChoiceClick",value:function(){this.unstageOtherChoice(),this.props.onInputFocus(),this.setState({editingOtherChoice:!0})}},{key:"handleOtherChoiceBlur",value:function(){var e=this;setTimeout((function(){e.props.onInputBlur(),e.setState({editingOtherChoice:!1})}),300)}},{key:"handleOtherChoiceCommit",value:function(){var e=this;setTimeout((function(){e.props.onInputBlur(),e.stageOtherChoice(e.state.otherValue),e.setState({editingOtherChoice:!1})}),300)}},{key:"removeStagedOtherChoice",value:function(e){var t=this;return e.filter((function(e){return e!==t.getOtherValue()}))}},{key:"unstageOtherChoice",value:function(){var e=this.props,t=e.onStageAnswer,n=e.value,o=e.allowMultipleSelection,r=n||[];t(e.blockRef,o?this.removeStagedOtherChoice(r):[])}},{key:"stageOtherChoice",value:function(e){var t=this,n=this.props,o=n.onStageAnswer,r=n.value,i=n.allowMultipleSelection,a=n.blockRef,c=r||[],l=(i?[].concat($n()(this.removeStagedOtherChoice(c)),[e]):[e]).filter(Boolean);o(a,l),l.length&&!i&&setTimeout((function(){t.handleCommitAnswer()}),550)}},{key:"hoverNextRow",value:function(){return this.changekeyboardHoveredIndex(this.state.keyboardHoveredIndex>=0?this.state.keyboardHoveredIndex+this.renderedColumns:0)}},{key:"hoverPreviousRow",value:function(){return this.changekeyboardHoveredIndex(this.state.keyboardHoveredIndex-this.renderedColumns)}},{key:"hoverNextStep",value:function(){return this.changekeyboardHoveredIndex(this.state.keyboardHoveredIndex+1)}},{key:"hoverPreviousStep",value:function(){return this.changekeyboardHoveredIndex(this.state.keyboardHoveredIndex-1)}},{key:"changekeyboardHoveredIndex",value:function(e){return e>=this.getChoicesLength()||(e<0||(this.setState({keyboardHoveredIndex:e}),this.props.scrollToChoice(this.getPositionRef(e)),!1))}},{key:"handleSelectHovered",value:function(){this.handleKeyboardSelect(this.state.keyboardHoveredIndex)}},{key:"handleKeyboardSelect",value:function(e){if(-1===e)this.handleCommitAnswer();else{var t=this.getPositionRef(e);if(t!==this.getOtherChoiceRef())t&&this.handleSelect(t);else((this.props.value||[]).includes(this.getOtherValue())||this.canSelectMoreChoices())&&this.handleOtherChoiceClick()}}},{key:"handleSelect",value:function(e){var t,n=this,o=this.props,r=o.onStageAnswer,i=o.allowMultipleSelection,a=o.value||[],c=a.includes(e);(c||this.canSelectMoreChoices())&&(t=i?c?a.filter((function(t){return t!==e})):[].concat($n()(a),[e]):c?[]:[e],r(this.props.blockRef,t),i||c||setTimeout((function(){n.handleCommitAnswer()}),550))}},{key:"handleColumnsChanged",value:function(e){this.renderedColumns=e}},{key:"handleOtherChoiceKeyDown",value:function(e){e.stopPropagation(),e.keyCode===bt.a.ENTER&&this.handleOtherChoiceCommit(),e.keyCode===bt.a.ESCAPE&&this.handleOtherChoiceBlur()}},{key:"handleCommitAnswer",value:function(){this.props.onCommitAnswer(this.props.blockRef)}},{key:"canSelectMoreChoices",value:function(){var e=this.props,t=e.value,n=e.validations.maxSelection;return!n||(t||[]).length<n}},{key:"render",value:function(){var e=this,t=this.props,n=t.allowMultipleSelection,o=t.allowOtherChoice,r=t.choices,i=t.isActive,c=t.isFocused,l=t.onRequireStickyFooter,s=t.showLabels,u=t.supersized,p=t.t,d=t.theme,h=t.title,m=t.validations,f=t.value,v=t.verticalAlignment,g=t.withImage,y=m.minSelection,k=m.maxSelection,C=this.state,O=C.otherValue,w=C.editingOtherChoice,j=this.getChoicesLength(),E=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?so(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):so(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props,{title:{text:h,type:"legend"},useFieldset:!0}),S=f||[],x=i?this.state.keyboardHoveredIndex:null,P=!this.canSelectMoreChoices(),A=!v&&!this.props.longestChoiceWidth,R=this.props.longestChoiceWidth||this.state.longestChoiceWidth,F=g?no.a:to.a;return a.a.createElement(ft,E,r&&a.a.createElement("div",{ref:this.getBlockNode},a.a.createElement(I.a,{top:4,bottom:2},n&&a.a.createElement(ro,{color:d.colors.secondary,maxSelection:k,minSelection:y,selectionCount:S.length}),A&&a.a.createElement(uo,{ref:this.getHiddenListRef},a.a.createElement(ho,{choices:po({choices:r,t:p}),allowOtherChoice:o,otherValue:O,vertical:v})),a.a.createElement(tn,{shouldFocus:c&&!w,layoutItemsSize:this.props.layoutItemsSize,onKeyDown:this.handleKeyDown,"data-qa":"focusable"},a.a.createElement(eo.a,{onChangeColumns:this.handleColumnsChanged,vertical:v,longestChoiceWidth:R,ignoreBreakpoints:g},r.map((function(t,n){return a.a.createElement(eo.b,{dataQa:"choice",dataQaIndex:n,title:s?Object(T.a)(p(t.label)):"",key:t.ref,choiceRef:t.ref,hovered:x===n,selected:S.includes(t.ref),disabled:P&&!S.includes(t.ref),onClick:e.handleSelect,color:d.colors.secondary,contextBackgroundColor:d.colors.background,keyHelperHint:p("label.hint.key"),keyHelperLetter:e.createKeyShortcut(n,t.label,t.keyboardShortcut),withImage:g,superSizedImage:u,isCropped:t.isCropped,imageSrc:t.attachment&&t.attachment.resource&&t.attachment.resource.default})})),o&&a.a.createElement(F,{dataQa:"other-choice",placeholder:p("block.multipleChoice.other"),value:O,editing:w,choiceRef:this.getOtherChoiceRef(),hovered:x===j-1,disabled:P&&!this.getOtherValue(),selected:!!this.getOtherValue(),onClick:this.handleOtherChoiceClick,onChange:this.handleOtherChoiceChange,onBlur:this.handleOtherChoiceBlur,onEditConfirm:this.handleOtherChoiceCommit,onKeyDown:this.handleOtherChoiceKeyDown,color:d.colors.secondary,superSizedImage:u,contextBackgroundColor:d.colors.background,keyHelperHint:p("label.hint.key"),keyHelperLetter:this.createKeyShortcut(j-1,O)})))),a.a.createElement(be,{buttonColor:d.colors.button,helperColor:d.colors.primary,backgroundColor:d.colors.background,onRequireStickyFooter:l,blockRef:this.props.blockRef,onClick:this.handleCommitAnswer,layoutItemsSize:this.props.layoutItemsSize,hideButton:w})))}}]),t}(i.Component);mo.defaultProps={keyboardShortcutType:"letter",onCommitAnswer:Z.a,onInputBlur:Z.a,onInputFocus:Z.a,onStageAnswer:Z.a,recenter:Z.a,scrollToChoice:Z.a,showLabels:!0,t:function(e){return e},theme:{colors:{secondary:r.b,background:r.b}},validations:{},verticalAlignment:!0,withImage:!1};var fo=mo;function bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function vo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bo(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var go={sm:110,md:140,lg:150},yo=g()(JSON.stringify,(function(e){var t=e.choices,n=e.croppedChoiceRefs;return t.map((function(e){return vo({},e,{isCropped:!!n[e.ref]})}))})),ko=function(e){function t(e){var n;return Be()(this,t),(n=_e()(this,We()(t).call(this,e))).state={croppedChoiceRefs:{}},n}var n;return Ye()(t,e),Me()(t,[{key:"componentDidMount",value:function(){this.updateCroppedChoiceRefs(this.props.supersized,this.props.choices,this.state.croppedChoiceRefs)}},{key:"componentDidUpdate",value:function(){this.updateCroppedChoiceRefs(this.props.supersized,this.props.choices,this.state.croppedChoiceRefs)}},{key:"updateCroppedChoiceRefs",value:(n=Ut()(qt.a.mark((function e(t,n,o){var r,i,a,c,l,s;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(r={},!this.updatingCroopedChoicesRefs){e.next=5;break}return e.abrupt("return");case 5:this.updatingCroopedChoicesRefs=!0,e.t0=qt.a.keys(n);case 7:if((e.t1=e.t0()).done){e.next=24;break}if(i=e.t1.value,a=n[i],c=a.attachment&&a.attachment.resource,!(l=c&&c.src)||null!=o[a.ref]){e.next=22;break}return e.prev=13,e.next=16,Object(nn.b)(l);case 16:s=e.sent,r[a.ref]=s,e.next=22;break;case 20:e.prev=20,e.t2=e.catch(13);case 22:e.next=7;break;case 24:Object.keys(r).length&&this.setState({croppedChoiceRefs:vo({},o,{},r)}),this.updatingCroopedChoicesRefs=!1;case 27:case"end":return e.stop()}}),e,this,[[13,20]])}))),function(e,t,o){return n.apply(this,arguments)})},{key:"render",value:function(){var e=this.props,t=e.breakpoint,n=e.supersized,o=e.choices,r=go[t]*(n?1.5:1),i=n?yo({choices:o,croppedChoiceRefs:this.state.croppedChoiceRefs}):o;return a.a.createElement(fo,w()({},this.props,{choices:i,verticalAlignment:!1,longestChoiceWidth:Math.round(r),withImage:!0}))}}]),t}(i.Component);s.a.defaultProps={choices:[]};var Co=Object(ke.withBreakpoint)(ko),Oo=n(602),wo=n(604),jo=n(640),Eo=n.n(jo),So=n(599),xo=c.c.div.withConfig({displayName:"NativeDropdown__SelectWrapper",componentId:"k3avl5-0"})(["position:relative;"]),Po=c.c.select.withConfig({displayName:"NativeDropdown__Select",componentId:"k3avl5-1"})(["appearance:none;display:block;width:100%;font-family:inherit;color:",";padding-left:0px;padding-right:26px;padding-bottom:8px;border-radius:0;border:none;transition:0.2s;background-color:transparent;",";box-shadow:0 1px ",";&:-moz-focusring{color:transparent;text-shadow:0 0 0 transparent;}outline:none;&:focus{outline:none;}"],(function(e){return e.color}),(function(e){return Oe.f[e.size]}),(function(e){return Object(r.t)(e.color)})),Io=Object(c.c)(wn.b).attrs({svg:So.a}).withConfig({displayName:"NativeDropdown__DropdownIcon",componentId:"k3avl5-2"})(["position:absolute;right:5px;top:14px;user-select:none;"]),Ao=function(e){function t(e){var n;return Be()(this,t),(n=_e()(this,We()(t).call(this,e))).handleChange=n.handleChange.bind(Ke()(n)),n}return Ye()(t,e),Me()(t,[{key:"handleChange",value:function(e){var t=this;this.props.onStageAnswer(this.props.blockRef,[e.target.value]),setTimeout((function(){t.props.onCommitAnswer(t.props.blockRef)}),550)}},{key:"render",value:function(){var e=this.props,t=e.value,n=e.choices,o=e.color,i=e.placeholder,c=e.breakpoint,l=n.map((function(e){return e.label})),s=""!==t,u=Object(r.t)(o);return a.a.createElement(xo,null,a.a.createElement(Po,{size:Object(S.breakpointToTextSize)("size3",c),color:s?o:u,value:t,onChange:this.handleChange},a.a.createElement("option",{value:""},i),l.map((function(e,t){return a.a.createElement("option",{key:t,value:e},e)}))),a.a.createElement(Io,{color:o}))}}]),t}(i.Component);Ao.defaultProps={color:r.b,blockRef:""};var Ro=Ao,Fo=n(64),Do=c.c.div.withConfig({displayName:"Dropdown__Focusable",componentId:"sc-1auld0s-0"})(["outline:none;"]),No=function(e){function t(e){var n;Be()(this,t),(n=_e()(this,We()(t).call(this,e))).handleMouseEnter=n.handleMouseEnter.bind(Ke()(n)),n.handleMouseLeave=n.handleMouseLeave.bind(Ke()(n)),n.handleAnswer=n.handleAnswer.bind(Ke()(n)),n.handleInputChange=n.handleInputChange.bind(Ke()(n)),n.handleInputBlur=n.handleInputBlur.bind(Ke()(n)),n.handleInputClick=n.handleInputClick.bind(Ke()(n)),n.handleKeyDown=n.handleKeyDown.bind(Ke()(n)),n.handleIconClick=n.handleIconClick.bind(Ke()(n)),n.handleWaypointEnter=n.handleWaypointEnter.bind(Ke()(n)),n.handleWaypointLeave=n.handleWaypointLeave.bind(Ke()(n)),n.inputId="".concat(n.props.type,"-").concat(n.props.blockRef),n.memoizedFilterOptions=g()((function(e,t){return t}),wo.a);var o=n.props.value;return n.state={forceHoverIndex:-1,forceSelectedIndex:-1,forceFocusInput:!1,insideViewport:!1,showList:!1,hovered:!1,filter:o&&o.length>0?o[0]:""},n}return Ye()(t,e),Me()(t,[{key:"componentDidMount",value:function(){this.props.isActive&&this.checkForceFocusInput(this.props.isFocused,this.state.insideViewport)}},{key:"componentWillReceiveProps",value:function(e){var t=e.isActive,n=e.shouldClearInput,o=e.isFocused;t&&o&&!this.props.isFocused&&this.checkForceFocusInput(o,this.state.insideViewport),!t&&this.state.showList&&this.toggleDropdown(!1),n&&this.setState({filter:""})}},{key:"shouldComponentUpdate",value:function(e){return wt(this.props,e)}},{key:"componentDidUpdate",value:function(){this.state.forceFocusInput&&this.setState({forceFocusInput:!1})}},{key:"getAnswerValue",value:function(){var e=this.props.value;return e&&e.length>0?e[0]:void 0}},{key:"getFilteredOptions",value:function(){return this.memoizedFilterOptions(this.props.choices,this.state.filter)}},{key:"getListHeight",value:function(){if(!Object(Fo.a)())return 0;var e=(this.props.layoutItemsSize.boundingClientRect.height||0)/2-8-0;return Math.max(0,e)}},{key:"handleWaypointEnter",value:function(){var e=this;this.setState({insideViewport:!0}),setTimeout((function(){return e.checkForceFocusInput(e.props.isFocused,e.state.insideViewport)}),100)}},{key:"handleWaypointLeave",value:function(){this.setState({insideViewport:!1})}},{key:"handleMouseEnter",value:function(){this.setState({hovered:!0})}},{key:"handleMouseLeave",value:function(){this.setState({hovered:!1})}},{key:"stage",value:function(e){this.props.onStageAnswer(this.props.blockRef,[e])}},{key:"unstage",value:function(){this.setState({forceSelectedIndex:-1}),this.props.onStageAnswer(this.props.blockRef,null)}},{key:"handleAnswer",value:function(e){var t=this,n=this.props.choices[e];this.setState({forceSelectedIndex:e,forceHoverIndex:-1}),n&&(setTimeout((function(){t.toggleDropdown(!1),t.stage(n.label),t.setState({filter:n.label})}),400),setTimeout((function(){t.props.onCommitAnswer(t.props.blockRef)}),550))}},{key:"handleInputChange",value:function(e){this.unstage();var t=this.memoizedFilterOptions(this.props.choices,e||""),n=null!=e&&t.length>0;this.toggleDropdown(n),this.setState({filter:e||""}),Object(r.j)()&&this.props.recenter("bottom")}},{key:"handleInputBlur",value:function(){this.state.hovered||this.toggleDropdown(!1)}},{key:"handleInputClick",value:function(){this.toggleDropdown(!0)}},{key:"toggleDropdown",value:function(e){var t=this;e!==this.state.showList&&(e&&setTimeout((function(){return t.props.recenter("bottom")}),200),this.setState({showList:e,forceHoverIndex:e?0:-1}))}},{key:"handleIconClick",value:function(){this.toggleDropdown(!this.state.showList)}},{key:"handleKeyDown",value:function(e){var t,n,o,r=e.keyCode,i=this.getFilteredOptions().length;switch(r){case bt.a.ARDOWN:e.preventDefault(),e.stopPropagation(),this.toggleDropdown(!0),this.setState({forceHoverIndex:Math.min(i-1,this.state.forceHoverIndex+1)});break;case bt.a.ARUP:this.state.showList&&(e.preventDefault(),e.stopPropagation(),this.setState({forceHoverIndex:Math.max(0,this.state.forceHoverIndex-1)}));break;case bt.a.ENTER:if(this.state.showList&&i>0&&-1!==this.state.forceHoverIndex){e.preventDefault(),e.stopPropagation();var a=(t=this.state.forceHoverIndex,n=this.memoizedFilterOptions(this.props.choices,this.state.filter),(o=n.find((function(e,n){return n===t})))?o.index:null);this.handleAnswer(a)}else this.props.validations&&this.props.validations.required&&(e.preventDefault(),e.stopPropagation(),this.unstage(),this.props.onCommitAnswer(this.props.blockRef),this.setState({showList:!1,filter:""}))}}},{key:"checkForceFocusInput",value:function(e,t){var n=this;e&&t&&(Object(r.j)()||setTimeout((function(){n.setState({forceFocusInput:!0})}),500))}},{key:"render",value:function(){var e=this.props,t=e.choices,n=e.title,o=e.placeholder,i=e.theme,c=e.isFocused,l=e.t,s=e.onStageAnswer,u=e.onCommitAnswer,p=e.blockRef,d=e.breakpoint,h=0===this.getFilteredOptions().length,m=!0===this.state.showList;return a.a.createElement(ft,w()({},this.props,{title:{text:n,for:this.inputId,type:"label"}}),Object(r.j)()?a.a.createElement(I.a,{top:4},a.a.createElement(Ro,{breakpoint:d,blockRef:p,choices:t,color:i.colors.secondary,placeholder:l("block.dropdown.placeholderTouch"),onStageAnswer:s,onCommitAnswer:u,value:this.getAnswerValue()})):a.a.createElement(Oo.a,{onEnter:this.handleWaypointEnter,onLeave:this.handleWaypointLeave},a.a.createElement(I.a,{top:4},a.a.createElement(Do,{tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,"data-qa":"focusable"},a.a.createElement(Eo.a,{placeholder:l(o),options:t.map((function(e){return e.label})),color:i.colors.secondary,contextBackgroundColor:i.colors.background,filterValue:this.state.filter,hoveredIndex:this.state.forceHoverIndex,selectedIndex:this.state.forceSelectedIndex,onFilterChange:this.handleInputChange,onInputClick:this.handleInputClick,onArrowClick:this.handleIconClick,onOptionClick:this.handleAnswer,onInputBlur:this.handleInputBlur,optionsMaxHeight:"".concat(m?this.getListHeight():0,"px"),optionsOpen:m,forceFocus:c&&this.state.forceFocusInput})))),a.a.createElement(I.a,{top:2},a.a.createElement(be,{blockRef:p,hideButton:m,customError:h?"block.dropdown.hint":null})))}}]),t}(i.Component);No.defaultProps={onCommitAnswer:Z.a,onStageAnswer:Z.a,recenter:Z.a,t:function(e){return e},theme:{colors:{secondary:r.b,background:r.b}}};var To=Object(ke.withBreakpoint)(No),Bo=n(643),Lo=n.n(Bo);var Mo=function(e){var t=Object(i.useRef)([]),n=Object(i.useRef)(null);function o(){clearTimeout(n.current),n.current=null}return{onKeyDown:function(r){!function(e){return bt.a.NUM_0<=e&&e<=bt.a.NUM_9||bt.a.NUMPAD_0<=e&&e<=bt.a.NUMPAD_9}(r)?o():(null===n.current&&(t.current=[],n.current=setTimeout((function(){e(t.current.reduce((function(e,t,n){return e+t*Math.pow(10,n)}),0))}),200)),t.current.unshift(function(e){return e-(e>=bt.a.NUMPAD_0?bt.a.NUMPAD_0:bt.a.NUM_0)}(r)))},clearNumberTimeout:o}};function zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var _o=function(e){var t=e.blockRef,n=e.children,o=e.isActive,r=e.isFocused,c=e.layoutItemsSize,l=e.max,s=e.min,u=e.onCommitAnswer,p=e.onRequireStickyFooter,h=e.onStageAnswer,m=e.theme,f=e.title,v=e.unstageOnKeyDown,g=Object(i.useState)(!1),y=d()(g,2),k=y[0],C=y[1],O=Object(i.useState)(-1),w=d()(O,2),j=w[0],E=w[1],S=Mo(R),x=S.onKeyDown,P=S.clearNumberTimeout;function A(){h(e.blockRef,[]),P()}function R(t){P(),t<e.min||t>e.max||(F()!==t?(h(e.blockRef,[t]),setTimeout((function(){u(e.blockRef)}),550)):A())}function F(){var t=e.value;return t&&t.length>0?t[0]:void 0}Object(i.useEffect)((function(){r||C(!1)}),[r]);var D=F(),N=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zo(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{title:{text:f,type:"legend"},useFieldset:!0});return a.a.createElement(ft,N,a.a.createElement(tn,{shouldFocus:r,layoutItemsSize:c,onKeyDown:function(e){var n=e.keyCode;if(x(n),n===bt.a.ENTER&&(e.stopPropagation(),k?R(j):u(t)),n===bt.a.ARRIGHT){var o=F();null==o||k?k?E(Math.min(l,j+1)):(C(!0),E(s)):(C(!0),E(Math.min(l,o+1)),v&&A())}if(n===bt.a.ARLEFT){var r=F();null==r||k?k&&E(Math.max(s,j-1)):(C(!0),E(Math.max(s,r-1)),v&&A())}}},a.a.createElement(I.a,{top:4,bottom:4},n({hoveredAmount:k?j:-1,isKeyboardHovered:k,onClick:function(e){R(e)},selectedAmount:D})),a.a.createElement(be,{buttonColor:m.colors.button,helperColor:m.colors.primary,backgroundColor:m.colors.background,onRequireStickyFooter:p,blockRef:t,layoutItemsSize:c,onClick:function(e){e.stopPropagation(),o&&u(t)}})))};_o.defaultProps={theme:{colors:{}}};var Ho=Object(i.memo)(_o,jt);var Wo=function(e){Object(i.useEffect)((function(){var t=e.blockIndex,n=e.blockRef,o=e.onCommitAnswer,r=e.onStageAnswer;if(0===t){var i=function(){if(!window||!window.location)return null;var e=window.location.search.match(/prefilled_answer=[0-9]+/);return e?parseInt(e[0].split("=")[1],10):null}();null!=i&&setTimeout((function(){r(n,[i]),setTimeout((function(){o(n)}),550)}),2e3)}}),[]);var t=e.labels,n=e.startAtOne,o=e.steps,r=e.theme,c=C()(e,["labels","startAtOne","steps","theme"]),l=n?1:0,s=l+o-1;return a.a.createElement(Ho,w()({max:s,min:l,theme:r},c),(function(e){var n=e.hoveredAmount,o=e.isKeyboardHovered,i=e.onClick,c=e.selectedAmount;return a.a.createElement(Lo.a,{color:r.colors.secondary,hoveredAmount:n,isKeyboardHovered:o,labelLeft:t.left,labelCenter:t.center,labelRight:t.right,max:s,min:l,onClick:i,selectedAmount:c})}))};Wo.defaultProps={labels:{},onCommitAnswer:function(){},onStageAnswer:function(){},theme:{colors:{secondary:r.b}}};var Vo=Wo,Ko=c.c.div.withConfig({displayName:"Group__ButtonWrapper",componentId:"sc-14mp1zx-0"})(["",";margin-top:","px;width:100%;outline:none;&:focus{outline:none;}"],(function(e){return e.isActive?"":"pointer-events: none;"}),4*Oe.h);Ko.displayName="ButtonWrapper";var qo=function(e){var t=e.blockRef,n=e.buttonText,o=e.children,r=e.isActive,c=e.isFocused,l=e.layoutItemsSize,s=e.theme,u=e.onRequireStickyFooter,p=e.t,h=void 0===p?function(e){return e}:p,m=Object(i.useState)(null),f=d()(m,2),b=f[0],v=f[1];Et(b,t,c,l);var g=function(n){n.stopPropagation(),r&&e.onCommitAnswer(t)};return a.a.createElement(ft,e,a.a.createElement(tn,{shouldFocus:c,layoutItemsSize:l,onKeyDown:function(e){e.nativeEvent.keyCode===bt.a.ENTER&&g(e)},"data-qa":"focusable"},o,a.a.createElement(Ko,{ref:v,isActive:r,tabIndex:"-1"},a.a.createElement(be,{buttonColor:s.colors.button,helperColor:s.colors.primary,backgroundColor:s.colors.background,onRequireStickyFooter:u,blockRef:t,buttonText:h(n),onClick:g,isAnimated:!1,isVisible:r,hideIcon:!0}))))};qo.defaultProps={theme:{colors:{}}};var Yo=Object(i.memo)(qo,jt),Uo=function(e){return a.a.createElement(Yo,w()({},e,{titleCounterIcon:e.hideMarks?null:"quote"}))},Go=n(645),Qo=n.n(Go),Xo=function(e){var t=e.shape,n=e.steps,o=e.theme,r=C()(e,["shape","steps","theme"]),i=n;return a.a.createElement(Ho,w()({max:i,min:1,theme:o},r,{unstageOnKeyDown:!0}),(function(e){var n=e.hoveredAmount,r=e.isKeyboardHovered,c=e.onClick,l=e.selectedAmount;return a.a.createElement(Qo.a,{color:o.colors.secondary,hoveredAmount:n,iconName:t,isKeyboardHovered:r,max:i,min:1,onClick:c,selectedAmount:l})}))};Xo.defaultProps={onCommitAnswer:function(){},onStageAnswer:function(){},shape:"circle",theme:{colors:{secondary:r.b}}};var Zo=Xo,Jo=c.c.div.withConfig({displayName:"Unsupported__Root",componentId:"sc-1p6qu18-0"})(["display:flex;margin-top:25px;max-width:750px;padding:15px;border-style:solid;border-width:1px;border-radius:3px;color:",";background-color:",";border-color:",";-webkit-font-smoothing:antialiased;"],(function(e){return e.color}),(function(e){return Object(r.d)(e.color,.05)}),(function(e){return Object(r.s)(e.color)})),$o=function(e){var t=e.theme,n=e.t,o=e.type,r=C()(e,["theme","t","type"]);return a.a.createElement(ft,w()({theme:t},r),a.a.createElement(Jo,{color:t.colors.secondary},a.a.createElement("label",null,Object(T.a)(n("block.unsupported.message",{type:n("block.types.".concat(o))})))))};$o.defaultProps={t:function(e){return e},theme:{colors:{secondary:r.b}}};var er=$o,tr=function(e){var t={true:"".concat(e.blockRef,"-yes"),false:"".concat(e.blockRef,"-no")},n=[{ref:t[!0],value:!0,label:"label.yes.default",keyboardShortcut:"label.yes.shortcut"},{ref:t[!1],value:!1,label:"label.no.default",keyboardShortcut:"label.no.shortcut"}],o=Array.isArray(e.value)?e.value[0]:e.value;return a.a.createElement(fo,w()({choices:n},e,{value:[t[o]],onStageAnswer:function(t,o){var r=d()(o,1)[0],i=n.find((function(e){return e.ref===r})),a=[{value:i&&i.value,label:i&&e.t(i.label)}];e.onStageAnswer(e.blockRef,i?a:[])},keyboardShortcutType:"custom",verticalAlignment:!0}))};tr.defaultProps={onCommitAnswer:Z.a,onStageAnswer:Z.a,t:function(e){return e},theme:{colors:{secondary:r.b,background:r.b}}};var nr=tr,or=function(e){var t={true:"".concat(e.blockRef,"-accept"),false:"".concat(e.blockRef,"-reject")},n=[{ref:t[!0],value:!0,label:"block.legal.accept"},{ref:t[!1],value:!1,label:"block.legal.reject"}],o=Array.isArray(e.value)?e.value[0]:e.value;return a.a.createElement(fo,w()({choices:n},e,{value:[t[o]],onStageAnswer:function(t,o){var r=d()(o,1)[0],i=n.find((function(e){return e.ref===r})),a=[{value:i&&i.value,label:i&&e.t(i.label)}];e.onStageAnswer(e.blockRef,i?a:[])},keyboardShortcutType:"letter",verticalAlignment:!0}))};or.defaultProps={onCommitAnswer:Z.a,onStageAnswer:Z.a,t:function(e){return e},theme:{colors:{secondary:"#FF00FF",background:"#FFFFFF"}}};var rr=or;function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var ar=function(e){var t=e.blockRef,n=e.inputType,o=e.isActive,c=e.isFocused,l=e.layoutItemsSize,s=e.maxLength,u=e.onCommitAnswer,p=e.onInputBlur,h=e.onInputFocus,m=e.onRequireStickyFooter,f=e.onStageAnswer,v=e.placeholder,g=e.recenter,y=e.t,k=e.theme,C=e.title,O=e.type,j="".concat(O,"-").concat(t),E=St(600),S=d()(E,2),x=S[0],P=S[1],A=St(1e3,!0),R=d()(A,2),F=R[0],D=R[1];Object(i.useEffect)((function(){return D(o)}),[o]);var N=Object(i.useState)(),T=d()(N,2),B=T[0],L=T[1],M=Et(B,t,c,l);var z=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{title:{text:C,for:j,type:"label"}}),_=e.value.length>0?e.value[0]:"";return a.a.createElement(ft,w()({isShaking:x},z),a.a.createElement(I.a,{top:4,bottom:2},a.a.createElement(Ft.a,{getRef:L,placeholder:y(v),onKeyDown:function(e){Ct(O,e),e.nativeEvent.keyCode===bt.a.ENTER&&(Object(xt.a)("block-committed",{method:"key-enter",blockType:O}),Object(r.j)()&&(B&&B.blur(),e.stopPropagation()),setTimeout((function(){o&&u(t)}),(Object(r.j)(),0)))},onKeyPress:function(e){kt(O,s,e).blocked&&P(!0)},onChange:function(e){if(o){var n=e.target.value;f(t,n.slice(0,s))}},onFocus:function(){Object(r.j)()&&(h(),Object(Ot.a)()||setTimeout((function(){g("bottom")}),0))},onBlur:p,maxLength:s,inputId:j,value:_,color:k.colors.secondary,forceFocusedStyle:F,type:n})),a.a.createElement(be,{buttonColor:k.colors.button,helperColor:k.colors.primary,backgroundColor:k.colors.background,onRequireStickyFooter:m,blockRef:t,layoutItemsSize:l,onClick:function(e){Object(xt.a)("block-committed",{method:"click",blockType:O});var n=M&&Object(r.j)();B&&n&&B.blur(),e.stopPropagation(),setTimeout((function(){o&&u(t)}),0)}}))};ar.defaultProps={onCommitAnswer:Z.a,onStageAnswer:Z.a,t:Z.a,theme:{colors:{secondary:r.b}},value:[]};var cr=Object(i.memo)(ar,jt),lr=function(e){return a.a.createElement(cr,w()({},e,{inputType:"email",onCommitAnswer:function(){e.value&&Array.isArray(e.value)&&e.value[0]&&e.onStageAnswer(e.blockRef,e.value[0].trim()),e.onCommitAnswer(e.blockRef)}}))},sr=/\D+/g,ur=function(e){return a.a.createElement(cr,w()({},e,{onStageAnswer:function(t,n){n=parseInt(n.replace(sr,""),10),e.onStageAnswer(e.blockRef,n)},maxLength:15,inputType:"tel"}))},pr=n(650),dr=n(205),hr=n.n(dr),mr=n(706),fr=n(649),br=n(598),vr=Object(c.c)(wn.b).withConfig({displayName:"icon__StrokeIcon",componentId:"pde181-0"})(["margin-right:8px;svg{transform:scale(1);box-shadow:0 0 0 1px ",";border-radius:4px;box-sizing:content-box;background-color:#fff;}"],(function(e){return Object(r.i)(e.color)?Object(r.s)("#000"):Object(r.s)("#FFF")}));function gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var yr=c.c.div.withConfig({displayName:"select__MobileWrapper",componentId:"sc-1xepqbq-0"})(["position:absolute;z-index:",";",";"],Oe.j.level5,(function(e){return e.isVisible?"":"pointer-events: none"})),kr=c.c.div.withConfig({displayName:"select__DesktopWrapper",componentId:"sc-1xepqbq-1"})(["position:absolute;top:-8px;width:450px;height:300px;overflow:hidden;z-index:",";",";"],Oe.j.level5,(function(e){return e.isVisible?"":"pointer-events: none"}));kr.displayName="DesktopWrapper";var Cr=c.c.div.withConfig({displayName:"select__ChoiceContentWrapper",componentId:"sc-1xepqbq-2"})(["width:100%;display:flex;height:100%;align-items:center;padding:8px;height:","px;"],Object(r.j)()?44:40),Or=c.c.div.withConfig({displayName:"select__ChoiceContentText",componentId:"sc-1xepqbq-3"})(["display:flex;height:100%;flex:1;justify-content:space-between;align-items:center;"]),wr=g()((function(e){return e}),(function(e,t){return Object(wo.a)(t,e,"name").map((function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gr(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{name:Object(wo.b)(t.name,e)})}))})),jr=function(e,t,n,o,r){return function(i){var c=i.code,l=i.name,s=i.prefix,u=i.svg;return a.a.createElement(I.a,{bottom:.5,left:n,right:n},a.a.createElement(Zt.a,{fullHeight:!0},(function(n){var i=n.hovered;return a.a.createElement(br.a,{color:t,hovered:i||c===r||c===o,selected:c===o},a.a.createElement(Cr,null,a.a.createElement(vr,{color:e,svg:a.a.createElement(wn.a,{svgCode:u})}),a.a.createElement(Or,null,a.a.createElement(x.a,{color:t,inline:!0,responsive:!0,size:"size0"},l),a.a.createElement(x.a,{color:t,inline:!0,responsive:!0,size:"size0"},"+".concat(s)))))})))}},Er=function(e){function t(e){var n;return Be()(this,t),n=_e()(this,We()(t).call(this,e)),b()(Ke()(n),"handleKeyDown",(function(e){var t=e.keyCode,o=n.props,r=o.data,i=o.filterText,a=n.state.hoveredIndex,c=wr(i,r),l=c.length;switch(t){case bt.a.ARDOWN:e.preventDefault(),e.stopPropagation(),n.setState({hoveredIndex:Math.min(l-1,a+1)});break;case bt.a.ARUP:e.preventDefault(),e.stopPropagation(),n.setState({hoveredIndex:Math.max(0,a-1)});break;case bt.a.TAB:case bt.a.ESCAPE:e.preventDefault(),e.stopPropagation(),n.props.onClose();break;case bt.a.ENTER:e.preventDefault(),e.stopPropagation(),-1===a?l>0&&""!==i?n.handleSelection(c[0]):n.props.onClose():l>0&&n.handleSelection(c[a])}})),b()(Ke()(n),"handleFilterChange",(function(e){n.resetHoveredIndex(),n.props.onFilterChange(e)})),b()(Ke()(n),"handleSelection",(function(e){n.props.onSelect(e),setTimeout((function(){n.props.onClose()}),1e3)})),n.state={hoveredIndex:-1},n}return Ye()(t,e),Me()(t,[{key:"componentDidUpdate",value:function(e){!e.isOpen&&this.props.isOpen&&this.resetHoveredIndex()}},{key:"resetHoveredIndex",value:function(){this.setState({hoveredIndex:-1})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.filterText,o=e.isOpen,i=e.onClose,c=e.color,l=e.language,s=e.backgroundColor,u=e.innerRef,p=e.onFilterChange,d=e.value,m=e.fontFamily,f=e.t,b=f("block.countryDropdown.searchCountries"),v=f("block.countryDropdown.hint"),g=wr(n,t),y=this.state.hoveredIndex,k=g.length&&g[y]?g[y].code:"";return Object(r.j)()?a.a.createElement(yr,{ref:u,isVisible:o},a.a.createElement(mr.a,{backgroundColor:s,color:c,filterTextPlaceholder:b,filterText:n,noResultsMessage:v,onFilterChange:p,optionRender:jr(s,c,1,d),optionHeight:48,options:g,isVisible:o,keyProp:"code",onClose:i,onSelect:this.handleSelection,language:l,fontFamily:m,dataQa:"country-fullscreen-select",disableAnimations:h.a})):a.a.createElement(R.a,{isVisible:o,type:"slideUp"},a.a.createElement(kr,{ref:u,isVisible:o,onKeyDown:this.handleKeyDown},a.a.createElement(fr.a,{backgroundColor:s,color:c,filterTextPlaceholder:b,filterText:n,noResultsMessage:v,onFilterChange:this.handleFilterChange,optionRender:jr(s,c,2,d,k),optionHeight:44,options:g,isVisible:o,keyProp:"code",onClose:i,onSelect:this.handleSelection,language:l,dataQa:"country-dropdown-select",hoveredIndex:y})))}}]),t}(i.PureComponent);Er.defaultProps={backgroundColor:r.b,color:r.b,data:[],filterText:"",fontFamily:Oe.b,onClose:Z.a,onFilterChange:Z.a,onSelect:Z.a,t:Z.a};var Sr=Object(N.a)(Er);function xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var Pr=Object(c.c)(D.a).withConfig({displayName:"CountryDropdown__TriggerButton",componentId:"khpc7r-0"})(["box-shadow:0px 1px ",";",";opacity:",";cursor:pointer;padding-bottom:16px;"],(function(e){return Object(r.t)(e.color)}),(function(e){return e.isVisible?"pointer-events: none;":""}),(function(e){return e.isVisible?"0":"1"})),Ir=function(e,t,n){return hr()((function(e,t){return e.name.localeCompare(t.name)}),e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{name:n(e.code,t)})})))},Ar=function(e){function t(){var e,n;Be()(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return n=_e()(this,(e=We()(t)).call.apply(e,[this].concat(i))),b()(Ke()(n),"state",{filterText:"",sortedData:[],countryNameTranslator:function(e){return e}}),b()(Ke()(n),"dropdownRef",a.a.createRef()),b()(Ke()(n),"handleDocumentClick",(function(e){n.isClickFromDropdown(n.dropdownRef.current,e.target)||!Object(r.j)()&&n.enableClickClose&&n.props.onClose()})),b()(Ke()(n),"handleFilterTextChange",(function(e){n.setState({filterText:e})})),b()(Ke()(n),"isClickFromDropdown",(function(e,t){var n=t;do{if(n===e)return!0;n=n.parentElement}while(null!==n);return!1})),b()(Ke()(n),"handleSelect",(function(e){return n.props.onChange(e.code)})),n}return Ye()(t,e),Me()(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("click",this.handleDocumentClick),n.e(1).then(n.bind(null,711)).then((function(t){var n=t.countryData,o=t.countryNameTranslator;e.setState({countryNameTranslator:o,sortedData:Ir(n,e.props.language,o)})})).catch((function(e){console.error("Error fetching country information: ",e)}))}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.isOpen&&!e.isOpen?setTimeout((function(){t.enableClickClose=!0}),200):!this.props.isOpen&&e.isOpen&&(this.enableClickClose=!1,this.setState({filterText:""})),this.props.language!==e.language&&this.setState({sortedData:Ir(this.state.sortedData,this.props.language,this.state.countryNameTranslator)})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleDocumentClick)}},{key:"render",value:function(){var e=this.state,t=e.filterText,n=e.sortedData,o=this.props,r=o.value,c=o.isOpen,l=o.onOpen,s=o.onClose,u=o.color,p=o.language,d=o.backgroundColor,h=o.fontFamily,m=n.find((function(e){return e.code===r}));return m?a.a.createElement(i.Fragment,null,a.a.createElement(Sr,{autoComplete:"tel-national",data:n,filterText:t,isOpen:c,onClose:s,color:u,language:p,backgroundColor:d,innerRef:this.dropdownRef,onFilterChange:this.handleFilterTextChange,onSelect:this.handleSelect,value:m.code,fontFamily:h}),a.a.createElement(Pr,{"data-qa":"trigger-button",onClick:l,isVisible:c,color:u,align:"center"},a.a.createElement(vr,{color:d,svg:a.a.createElement(wn.a,{svgCode:m.svg})}),a.a.createElement(wn.b,{svg:So.a,color:u}))):null}}]),t}(i.Component),Rr=n(612);function Fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var Dr=/^[A-Za-z]+$/,Nr=/[^0-9a-zA-Z]+/gi,Tr=Object(c.c)(I.a).withConfig({displayName:"PhoneNumber__Root",componentId:"ver6na-0"})(["display:flex;align-items:flex-end;max-width:450px;"]),Br=Object(c.c)(I.a).withConfig({displayName:"PhoneNumber__DropdownWrapper",componentId:"ver6na-1"})(["position:relative;z-index:",";"],Oe.j.level1),Lr=function(e){function t(){var e,n;Be()(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return n=_e()(this,(e=We()(t)).call.apply(e,[this].concat(i))),b()(Ke()(n),"state",{isOpen:!1,isShaking:!1,getExampleNumber:null}),b()(Ke()(n),"getInputRef",(function(e){return n.textInput=e})),b()(Ke()(n),"getValue",(function(e){return e.value&&e.value.length>0?e.value[0]:{}})),b()(Ke()(n),"getNumber",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props;return n.getValue(e).number||""})),b()(Ke()(n),"getCountryCode",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props;return n.getValue(e).countryCode||e.defaultCountryCode.toUpperCase()})),b()(Ke()(n),"getPlaceholder",(function(e){return n.state.getExampleNumber?n.state.getExampleNumber(e,pr).formatNational():""})),b()(Ke()(n),"handleKeyPress",(function(e){if(String.fromCharCode(e.charCode).match(Dr))return e.preventDefault(),void n.shake();Object(Rr.c)(n.getCountryCode(),e.target.value).replace(Nr,"").length>15&&(e.preventDefault(),n.shake())})),b()(Ke()(n),"handleKeyDown",(function(e){e.nativeEvent.keyCode===bt.a.ENTER&&(Object(r.j)()&&n.textInput&&n.textInput.blur(),e.stopPropagation(),setTimeout((function(){n.props.isActive&&n.props.onCommitAnswer(n.props.blockRef)}),Object(r.j)()?700:0))})),b()(Ke()(n),"handleValueChange",(function(e,t){var o=e;try{o=n.parsePhoneNumber(e,t).formatInternational()}catch(e){}n.props.isActive&&n.props.onStageAnswer(n.props.blockRef,{number:e,countryCode:t,label:o})})),b()(Ke()(n),"handleNumberChange",(function(e){var t=e.target.value,o=n.getNumber(),r=n.getCountryCode(),i=n.guessCountryBasedOnNumber(t)||r,a=i!==r;n.AsYouType&&a&&n.createCountryFormatter(i),n.parseDigits(t)!==n.parseDigits(o)&&(t=n.formatPhoneNumber(t)),n.handleValueChange(t,i)})),b()(Ke()(n),"handleCountryChange",(function(e){if(e!==n.getCountryCode()){n.AsYouType&&n.createCountryFormatter(e);var t=n.formatPhoneNumber(n.getNumber());n.handleValueChange(t,e)}})),b()(Ke()(n),"handleDropdownOpen",(function(){n.props.recenter("bottom"),n.setState({isOpen:!0})})),b()(Ke()(n),"handleDropdownClose",(function(){n.setState({isOpen:!1}),Object(r.j)()||n.textInput.focus()})),b()(Ke()(n),"handleOnScroll",(function(){n.updateInputFocus(n.textInput,n.props.isActive)})),b()(Ke()(n),"handleCommit",(function(e){var t=n.isInputFocused()&&Object(r.j)();n.textInput&&t&&n.textInput.blur(),e.stopPropagation(),setTimeout((function(){n.props.isActive&&n.props.onCommitAnswer(n.props.blockRef)}),t?700:0)})),n}return Ye()(t,e),Me()(t,[{key:"componentDidMount",value:function(){var e=this;n.e(0).then(n.bind(null,699)).then((function(t){var n=t.AsYouType,o=t.parseDigits,r=t.parsePhoneNumber,i=t.getExampleNumber;e.AsYouType=n,e.formatter=new n(e.getCountryCode()),e.parseDigits=o,e.parsePhoneNumber=r,e.setState({getExampleNumber:i})})).catch((function(e){console.error("Error fetching phone library: ",e)})),this.updateInputFocus(this.textInput,this.props.isActive)}},{key:"componentDidUpdate",value:function(e){var t=this.getCountryCode(e),n=this.getCountryCode();this.AsYouType&&t!==n&&this.createCountryFormatter(n),this.updateInputFocus(this.textInput,this.props.isActive,e.isActive)}},{key:"createCountryFormatter",value:function(e){this.formatter=new this.AsYouType(e)}},{key:"formatPhoneNumber",value:function(e){return this.parseDigits&&(e=this.formatter.input(e),this.formatter.reset()),e}},{key:"guessCountryBasedOnNumber",value:function(e){this.formatter.input(e);var t=this.formatter.country||this.formatter.metadata._country;return this.formatter.reset(),t}},{key:"shake",value:function(){var e=this;this.setState({isShaking:!0}),clearTimeout(this.shakeStopTimeout),this.shakeStopTimeout=setTimeout((function(){return e.setState({isShaking:!1})}),600)}},{key:"updateInputFocus",value:function(e,t,n){this.props.canUpdateFocus&&!this.state.isOpen&&(t?!Object(r.j)()&&ie(e,this.props.layoutItemsSize)&&e.focus():n&&e.blur())}},{key:"isInputFocused",value:function(){return!!document&&document.activeElement===this.textInput}},{key:"render",value:function(){var e=this.props,t=e.blockRef,n=e.language,o=e.layoutItemsSize,r=e.theme,i=e.title,c=e.onRequireStickyFooter,l=this.state.isOpen,s=this.getNumber(),u=this.getCountryCode(),p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.props,{title:{text:i,type:"label"}});return a.a.createElement(ft,w()({isShaking:this.state.isShaking},p,{onScroll:this.handleOnScroll}),a.a.createElement(Tr,{top:4,bottom:2},a.a.createElement(Br,{right:2},a.a.createElement(Ar,{backgroundColor:r.colors.background,color:r.colors.secondary,isOpen:l,language:n,onClose:this.handleDropdownClose,onOpen:this.handleDropdownOpen,value:u,onChange:this.handleCountryChange,fontFamily:r.font})),a.a.createElement(Ft.a,{getRef:this.getInputRef,inputId:"phone-number-".concat(t),color:r.colors.secondary,value:s,placeholder:this.getPlaceholder(u),onChange:this.handleNumberChange,onKeyDown:this.handleKeyDown,onKeyPress:this.handleKeyPress,onFocus:this.props.onInputFocus,onBlur:this.props.onInputBlur,type:"tel",autoComplete:"tel-national",dataQa:"phone-number-input",showBorder:!0})),a.a.createElement(be,{buttonColor:r.colors.button,helperColor:r.colors.primary,backgroundColor:r.colors.background,onRequireStickyFooter:c,blockRef:t,layoutItemsSize:o,onClick:this.handleCommit}))}}]),t}(i.Component);b()(Lr,"defaultProps",{defaultCountryCode:"US",theme:{colors:{secondary:r.b,background:r.b}},recenter:function(){}});var Mr=Lr,zr=function(e){return a.a.createElement(cr,w()({},e,{maxLength:e.validations.maxLength}))};zr.defaultProps={validations:{maxLength:null}};var _r=zr,Hr=new RegExp(/(https?|ftp|app):\/\//),Wr=function(e){return a.a.createElement(cr,w()({},e,{onCommitAnswer:function(){var t=Array.isArray(e.value)?e.value[0]:e.value;t&&!Hr.test(t)&&e.onStageAnswer(e.blockRef,"".concat("https://").concat(t)),e.onCommitAnswer(e.blockRef)},inputType:"url"}))},Vr=n(651),Kr=n.n(Vr),qr=n(114),Yr=n(210);function Ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qr=function(e,t){var n=Vr.textSizes[t],o="sm"===t?-1:0,i={color:"".concat(e),lineHeight:"".concat(n.lineHeight,"px"),letterSpacing:"".concat(o,"px"),fontSize:"".concat(n.fontSize,"px"),fontWeight:"".concat(Oe.c.regular),fontFamily:"".concat(Oe.a),fontSmoothing:"antialiased"};return{base:Gr({},i,{"::placeholder":Gr({},i,{color:"".concat(Object(r.t)(e))})})}},Xr=c.c.span.withConfig({displayName:"StripePayment__PriceTag",componentId:"sc-1jeyk0z-0"})(["font-weight:bold;"]);Xr.displayName="PriceTag";var Zr=function(e){function t(e){var n;return Be()(this,t),(n=_e()(this,We()(t).call(this,e))).stripeElement=null,n.cardName=null,n.cardNumber=null,n.state={cardError:null,isCardNumberFocused:!1,isCardNameFocused:!1},n.handleCommit=n.handleCommit.bind(Ke()(n)),n.handleCardNumberChange=n.handleCardNumberChange.bind(Ke()(n)),n.handleCardEnter=n.handleCardEnter.bind(Ke()(n)),n.handleCardNumberFocus=n.handleCardNumberFocus.bind(Ke()(n)),n.handleCardNumberBlur=n.handleCardNumberBlur.bind(Ke()(n)),n.handleCardNameKeyDown=n.handleCardNameKeyDown.bind(Ke()(n)),n.handleCardNameChange=n.handleCardNameChange.bind(Ke()(n)),n.handleCardNameFocus=n.handleCardNameFocus.bind(Ke()(n)),n.handleCardNameBlur=n.handleCardNameBlur.bind(Ke()(n)),n.handleScroll=n.handleScroll.bind(Ke()(n)),n.getAnswerValue=n.getAnswerValue.bind(Ke()(n)),n.focustimeout=null,n}var n;return Ye()(t,e),Me()(t,[{key:"componentDidMount",value:(n=Ut()(qt.a.mark((function e(){var t,n,o,i,a,c,l=this;return qt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.theme,o=t.breakpoint,i=t.isActive,a=t.isFocused,c={hidePostalCode:!0,hideIcon:!0,style:Qr(n.colors.secondary,o)},e.prev=2,e.next=5,Object(qr.a)(c);case 5:this.stripeElement=e.sent,this.stripeElement.on("change",this.handleCardNumberChange),this.stripeElement.on("focus",this.handleCardNumberFocus),this.stripeElement.on("blur",this.handleCardNumberBlur),this.stripeElement.on("ready",(function(){!Object(r.j)()&&i&&a&&l.updateCardFocus(l.stripeElement)})),this.stripeElement.mount(this.cardNumber),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.error(e.t0.message);case 16:case"end":return e.stop()}}),e,this,[[2,13]])}))),function(){return n.apply(this,arguments)})},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.theme,o=t.breakpoint,r=t.isActive,i=n.colors.secondary,a=e.theme.colors.secondary;this.stripeElement&&(r||(this.state.isCardNameFocused&&this.cardName&&this.cardName.blur(),this.state.isCardNumberFocused&&this.stripeElement.blur()),r&&this.updateCardFocus(this.cardNumber),e.breakpoint===o&&a===i||this.stripeElement.update({style:Qr(i,o)}))}},{key:"componentWillUnmount",value:function(){this.stripeElement&&this.stripeElement.destroy(),this.stage(this.props.blockRef,{cardholdersName:"",isCardValid:!1,isCardEmpty:!0})}},{key:"getAnswerValue",value:function(){var e=this.props.value;return e&&e.length&&e[0]?e[0]:{}}},{key:"preventInputBlur",value:function(){var e=this;this.preventBlur=!0,setTimeout((function(){return e.preventBlur=!1}),300),clearTimeout(this.inputBlurTimeout)}},{key:"handleInputBlur",value:function(){var e=this;this.inputBlurTimeout=setTimeout((function(){!e.preventBlur&&e.props.onInputBlur()}),100)}},{key:"handleTouchRecentering",value:function(){var e=this;Object(r.j)()&&!Object(Ot.a)()&&setTimeout((function(){e.props.recenter("bottom","bottom")}),700)}},{key:"handleCardNumberFocus",value:function(){this.preventInputBlur(),this.props.onInputFocus(),this.setState({isCardNumberFocused:!0}),this.handleTouchRecentering()}},{key:"handleCardNumberBlur",value:function(){this.setState({isCardNumberFocused:!1}),this.handleInputBlur()}},{key:"handleCardNameFocus",value:function(){this.preventInputBlur(),this.props.onInputFocus(),this.setState({isCardNameFocused:!0}),this.handleTouchRecentering()}},{key:"handleCardNameBlur",value:function(){this.setState({isCardNameFocused:!1}),this.handleInputBlur()}},{key:"handleCardNameKeyDown",value:function(e){if(e.keyCode===bt.a.TAB&&e.shiftKey)return this.stripeElement.focus(),void e.stopPropagation();var t=this.getAnswerValue(),n=t.cardholdersName,o=t.isCardValid;e.keyCode===bt.a.ENTER&&o&&n&&(this.handleCommit(),this.cardName&&this.cardName.blur())}},{key:"handleCommit",value:function(){var e=this;setTimeout((function(){e.props.isActive&&e.props.onCommitAnswer(e.props.blockRef)}),0)}},{key:"handleCardEnter",value:function(){this.cardName&&this.cardName.focus()}},{key:"handleScroll",value:function(){this.props.isActive&&this.updateCardFocus(this.cardNumber)}},{key:"updateCardFocus",value:function(e){var t=this;Object(r.j)()||!this.props.isFocused||this.state.isCardNameFocused||this.state.isCardNumberFocused||!ie(e,this.props.layoutItemsSize)||(clearTimeout(this.focustimeout),this.focustimeout=setTimeout((function(){t.props.isActive&&t.stripeElement.focus()}),100))}},{key:"stage",value:function(e,t){if(t&&!t.cardholdersName&&t.isCardEmpty)return this.props.onStageAnswer(e,[]);this.props.onStageAnswer(e,[t])}},{key:"handleCardNameChange",value:function(e){this.stage(this.props.blockRef,Gr({},this.getAnswerValue(),{cardholdersName:e.target.value}))}},{key:"handleCardNumberChange",value:function(e){this.setState({cardError:e.error}),this.stage(this.props.blockRef,Gr({},this.getAnswerValue(),{isCardValid:e.complete,isCardEmpty:e.empty}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.blockRef,o=t.breakpoint,r=t.buttonText,i=t.isCommitted,c=t.isReviewModeEnabled,l=t.layoutItemsSize,s=t.price,u=t.theme,p=t.stripeErrorCodes,d=t.validations,h=t.onRequireStickyFooter,m=t.t,f=this.state.cardError,b=this.getAnswerValue(),v=b.cardholdersName,g=b.isCardValid,y=void 0!==g&&g,k=b.isCardEmpty,C=void 0===k||k,O=d&&d.required,j=i||c,E=!!v,S=j&&!E&&(!C||O),x=f||j&&(C||!y)&&(E||O),P=p[f&&f.code]||"label.error.required";return a.a.createElement(ft,w()({},this.props,{title:{text:this.props.title,for:this.inputId,type:"label"},onScroll:this.handleScroll}),a.a.createElement(I.a,{top:1},a.a.createElement(Xe.a,{type:"description",color:u.colors.primary,htmlTag:"p"},m("block.payment.hintCharge")," ",a.a.createElement(Xr,null,s)),a.a.createElement(Xe.a,{type:"description",color:u.colors.primary,htmlTag:"p"},m("block.payment.hintStore"))),a.a.createElement(I.a,{bottom:2},a.a.createElement(Kr.a,{breakpoint:o,color:u.colors.secondary,cardNameRef:function(t){return e.cardName=t},cardName:v||"",cardNameErrorMessage:Object(T.a)(m("label.error.required")),cardNamePlaceholder:m("block.payment.placeholder.cardName"),onCardNameChange:this.handleCardNameChange,onCardNameKeyDown:this.handleCardNameKeyDown,onCardNameFocus:this.handleCardNameFocus,onCardNameBlur:this.handleCardNameBlur,isCardNameErrorVisible:!!S,cardNumberRef:function(t){return e.cardNumber=t},cardNumberErrorMessage:Object(T.a)(m(P)),isCardNumberFocused:this.state.isCardNumberFocused,isCardNumberErrorVisible:!!x,onCardNumberEnterPressed:this.handleCardEnter,stripeLinkText:m("block.payment.securedBy")})),a.a.createElement(be,{buttonColor:u.colors.button,helperColor:u.colors.primary,backgroundColor:u.colors.background,onRequireStickyFooter:h,blockRef:n,label:r,onClick:this.handleCommit,layoutItemsSize:l,hideButton:!(y&&E),hideError:!0,hideIcon:!0}))}}]),t}(i.PureComponent);Zr.defaultProps={breakpoint:"lg",theme:{colors:{primary:r.b,secondary:r.b}},onInputFocus:function(){},onInputBlur:function(){},recenter:function(){},t:function(e){return e},value:[{cardholdersName:"",isCardEmpty:!0,isCardValid:!1}],stripeErrorCodes:{}};var Jr,$r=Object(o.b)((function(e){return{price:Object(de.K)(e),stripeErrorCodes:Yr}}))(Object(ke.withBreakpoint)(Zr)),ei=(Jr={},b()(Jr,ot.a.date,{component:Object(N.a)(Vt)}),b()(Jr,ot.a.dropdown,{component:Object(N.a)(To)}),b()(Jr,ot.a.email,{component:Object(N.a)(lr)}),b()(Jr,ot.a.fileUpload,{component:Object(N.a)(Zn)}),b()(Jr,ot.a.group,{component:Yo}),b()(Jr,ot.a.legal,{component:Object(N.a)(rr)}),b()(Jr,ot.a.longText,{component:Object(N.a)(At)}),b()(Jr,ot.a.multipleChoice,{component:Object(N.a)(fo)}),b()(Jr,ot.a.number,{component:Object(N.a)(ur)}),b()(Jr,ot.a.opinionScale,{component:Vo}),b()(Jr,ot.a.pictureChoice,{component:Object(N.a)(Co)}),b()(Jr,ot.a.rating,{component:Zo}),b()(Jr,ot.a.shortText,{component:Object(N.a)(_r)}),b()(Jr,ot.a.statement,{component:Uo}),b()(Jr,ot.a.website,{component:Object(N.a)(Wr)}),b()(Jr,ot.a.yesNo,{component:Object(N.a)(nr)}),b()(Jr,ot.a.payment,{component:Object(N.a)($r)}),b()(Jr,ot.a.phoneNumber,{component:Object(N.a)(Mr)}),Jr),ti={component:Object(N.a)(er)},ni=function(e){var t=e.type,n=C()(e,["type"]),o=ei.hasOwnProperty(t)?ei[t]:ti;return a.a.createElement(o.component,Object.assign({type:t},n,o.props))},oi=n(6);function ri(){return{type:oi.G,payload:{isInputFocused:!0}}}var ii=n(104);function ai(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ci(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ai(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ai(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var li=g()(JSON.stringify,se.g),si=function(){return Object(Ot.a)()&&window.scrollBy(0,0),function(e){setTimeout((function(){e({type:oi.G,payload:{isInputFocused:!1}})}),50)}},ui=Object(o.b)((function(e,t){var n=t.blockRef,o=function(e,t){var n=null;return function(o,r){var i=Object(ue.c)(o,r),a=Object(se.b)(o,r),c=Object(ue.e)(o,i),l=a&&Object(se.d)(a),s=Object(me.e)(o);if(n&&!c&&n.isActive===c&&n.theme===s&&n.isCommitted===l)return n;var u=!Object(se.o)(i.type,a),p=ci({},i,{blockIndex:Object(ue.d)(o,r),isFirstBlock:0===Object(ue.d)(o,r),title:e(o),description:t(o),formId:Object(le.d)(o),isAnswered:u,isActive:c,theme:s,isCommitted:l,isFocused:c&&Object(ue.a)(o),canUpdateFocus:Object(ue.a)(o),isReviewModeEnabled:Object(le.o)(o),isVisible:Object(ue.f)(o,i),isScrollNearTop:Object(le.p)(o),isVisibleGroupStickyHeader:Object(le.h)(o),isLivePreview:Object(le.l)(o),language:Object(le.t)(o),shouldClearInput:!u&&Object(le.l)(o),value:li(a),scrolling:Object(le.y)(o),ref:void 0});return n=p,p}}(Object(ii.b)(n),Object(ii.a)(n));return function(e){return o(e,n)}}),(function(e){return ci({},Object(y.b)({onCommitAnswer:u.a,onStageAnswer:u.v,scrollTo:u.d,recenter:u.m,scrollToChoice:u.s,endAutoScroll:u.c,goToNextBlock:u.f,goToPreviousBlock:u.h,onInputFocus:ri,onInputBlur:si,onRequireStickyFooter:u.n,onRequireStickyHeader:u.o},e))}))(ni),pi=n(613),di=n(652),hi=n.n(di),mi=c.c.div.withConfig({displayName:"MouseWheelTrigger__Root",componentId:"sc-1nbmmxo-0"})(["outline:none;width:100%;"]),fi=function(e){function t(){var e,n;Be()(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return n=_e()(this,(e=We()(t)).call.apply(e,[this].concat(r))),b()(Ke()(n),"Lethargy",new hi.a),b()(Ke()(n),"accumulated",0),b()(Ke()(n),"timeout",null),b()(Ke()(n),"disableTimeout",null),b()(Ke()(n),"disabledSwipe",!1),b()(Ke()(n),"handleWheelScroll",(function(e){var t=n.props,o=t.upHandler,r=t.downHandler,i=n.Lethargy.check(e),a=e.deltaY;n.disabledSwipe||!1===i||(n.accumulated+=a,n.setTimeout((function(){n.accumulated=0}))),n.accumulated<-300&&(o(),n.accumulated=0,n.disableSwipe(500)),n.accumulated>300&&(r(),n.accumulated=0,n.disableSwipe(500))})),n}return Ye()(t,e),Me()(t,[{key:"setTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(e,500)}))},{key:"disableSwipe",value:function(e){var t=this;this.disableTimeout&&clearTimeout(this.disableTimeout),this.disabledSwipe=!0,this.disableTimeout=setTimeout((function(){t.disabledSwipe=!1}),e)}},{key:"render",value:function(){return a.a.createElement(mi,{style:this.props.customStyle,onWheel:this.handleWheelScroll,tabIndex:"0"},this.props.children)}}]),t}(i.Component),bi=function(e){function t(){return Be()(this,t),_e()(this,We()(t).apply(this,arguments))}return Ye()(t,e),Me()(t,[{key:"render",value:function(){var e=this,t=this.props.fullHeight?{height:"100%"}:{};return a.a.createElement(fi,{customStyle:t,upHandler:function(){e.props.canSwipePrevious&&e.props.goToPreviousBlock()},downHandler:function(){e.props.canSwipeNext&&e.props.goToNextBlock()}},a.a.createElement(pi.a,w()({style:t,onSwiped:function(t){e.swipping=!1;var n=e.props,o=n.canSwipeNext,r=n.canSwipePrevious;Math.abs(t.deltaY)>50/t.velocity&&("Up"===t.dir?o&&!e.blockSwipeNext&&e.props.goToNextBlock():"Down"===t.dir&&r&&!e.blockSwipePrevious&&e.props.goToPreviousBlock())},onSwiping:function(){if(e.swipping)return!1;var t=e.props,n=t.canSwipeNext,o=t.canSwipePrevious;e.blockSwipeNext=!n,e.blockSwipePrevious=!o,e.swipping=!0}},{delta:10,preventDefaultTouchmoveEvent:!1,trackTouch:!0,trackMouse:!1}),this.props.children))}}]),t}(i.PureComponent),vi=n(52),gi=n(280),yi=n(203);function ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ci(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oi=function(e){var t=e.children,n=e.isVisible,o=e.duration,r=void 0===o?200:o,c=e.visibleStyle,l=void 0===c?{opacity:1}:c,s=e.invisibleStyle,u=void 0===s?{opacity:0}:s,p=Object(i.useState)(n),h=d()(p,2),m=h[0],f=h[1],b=Object(i.useState)(n?l:u),v=d()(b,2),g=v[0],y=v[1],k=Object(i.useRef)();return Object(i.useEffect)((function(){clearTimeout(k.current),n?(f(!0),k.current=setTimeout((function(){return y(l)}),0)):(y(u),k.current=setTimeout((function(){return f(!1)}),r+200))}),[n]),a.a.createElement("div",{style:Ci({display:m?"block":"none",transition:"all ease ".concat(r,"ms")},g)},t)},wi=n(276);function ji(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ei(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ji(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ji(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Si={x:0,y:0},xi=c.c.div.withConfig({displayName:"layout-media__Root",componentId:"m15s05-0"})(["position:absolute;top:0px;left:0px;right:0px;bottom:0px;opacity:",";transition:opacity 0.2s ease ","s;pointer-events:none;z-index:",";"],(function(e){return e.isVisible?1:0}),(function(e){return e.isVisible?.2:0}),(function(e){return e.isBackground?Oe.j.levelN1:"auto"})),Pi=c.c.div.withConfig({displayName:"layout-media__Wrapper",componentId:"m15s05-1"})(["position:absolute;top:0;left:",";right:0;bottom:0;background:",";"],(function(e){return e.fullWidth?0:"50%"}),(function(e){return Object(r.u)(Object(r.e)(e.contextBackgroundColor,.02,.8,1,.9))})),Ii=c.c.div.withConfig({displayName:"layout-media__AttachmentWrapper",componentId:"m15s05-2"})(["position:relative;height:100%;width:100%;display:flex;align-items:center;justify-content:center;padding-left:","px;padding-right:","px;padding-top:","px;padding-bottom:","px;"],(function(e){return e.paddingLeft}),(function(e){return e.paddingRight}),(function(e){return e.paddingTop}),(function(e){return e.paddingBottom})),Ai=c.c.div.withConfig({displayName:"layout-media__FilterWrapper",componentId:"m15s05-3"})(["width:100%;filter:",";",";"],(function(e){return e.brightness<0?"brightness(".concat(1+e.brightness,");"):"contrast(".concat(1-e.brightness,") brightness(").concat(1+e.brightness,");")}),(function(e){return e.cover&&"height: 100%; width: 100%;"})),Ri=[rt.a.SPLIT.DESKTOP,rt.a.FLOAT.DESKTOP,rt.a.WALLPAPER.DESKTOP,rt.a.WALLPAPER.MOBILE],Fi=function(e){var t=e.blocks,n=e.areBlocksVisible,o=e.currentRef,r=e.nextRef,i=e.previousRef,c=e.theme,l=e.forceBreakpoint,s=Object(ke.useBreakpoint)();l&&(s=l);var u=t.find((function(e){return e.ref===o})),p=Ce(ge()(rt.b.STACK,["layout","type"],u),s),d=n&&Ri.includes(p),h=p===rt.a.WALLPAPER.DESKTOP||p===rt.a.WALLPAPER.MOBILE;return a.a.createElement(xi,{isVisible:d,isBackground:h},t.map((function(e){if(!e.attachment||!e.layout)return null;var t=Ce(e.layout.type,s),n=ge()("",["layout","attachment","href"],e),l=e.attachment.type===yi.b,u=Object(wi.b)(n),p=l&&!u?0:ge()(0,["layout","attachment","properties","brightness"],e),d=ge()(Si,["layout","attachment","properties","focalPoint"],e),h=t===rt.a.SPLIT.DESKTOP||t===rt.a.WALLPAPER.DESKTOP||t===rt.a.WALLPAPER.MOBILE,m=h?0:Object(ye.b)(s),f=e.ref===o,b=e.ref===i,v=e.ref===r;if(!((f||b||v)&&Ri.includes(t)))return null;var g=e.attachment.type===yi.b?Ei({},e.attachment,{resource:Ei({},e.attachment.resource,{scale:1})}):e.attachment,y=t===rt.a.WALLPAPER.DESKTOP||t===rt.a.WALLPAPER.MOBILE;return a.a.createElement(Oi,{key:e.ref,isVisible:e.ref===o},a.a.createElement(Pi,{contextBackgroundColor:c.colors.background,fullWidth:y},a.a.createElement(Ii,{paddingTop:m,paddingBottom:m,paddingLeft:m,paddingRight:m},a.a.createElement(Ai,{brightness:p,cover:h},a.a.createElement(nt.a,w()({cover:h},g,{focalPoint:d,isHighDefinition:y,isCentered:!0}))))))})))};Fi.defaultProps={theme:{colors:{background:r.b}}};var Di=Fi,Ni=c.c.div.withConfig({displayName:"BlockList__Root",componentId:"ny54fa-0"})(["height:100%;"]),Ti=c.c.div.withConfig({displayName:"BlockList__BlockListContainer",componentId:"ny54fa-1"})(["overflow:hidden;height:100%;width:100%;position:relative;"]);c.c.div.withConfig({displayName:"BlockList__Separator",componentId:"ny54fa-2"})(["padding-top:","px;padding-bottom:","px;"],(function(e){return e.top}),(function(e){return e.bottom})).displayName="Separator";var Bi=h.a?0:400,Li=Object(c.d)(["0%{opacity:0;transform:translateY(-","px);}33%{opacity:0;transform:translateY(-","px);}100%{opacity:1;transform:translateY(0px);}"],400,400),Mi=Object(c.b)(["animation:"," ","ms forwards;"],Li,gi.a),zi=Object(c.d)(["0%{opacity:1;transform:translateY(0px);}100%{opacity:0;transform:translateY(","px);}"],400),_i=Object(c.b)(["animation:"," ","ms forwards;"],zi,Bi),Hi=Object(c.d)(["0%{opacity:0;transform:translateY(","px);}33%{opacity:0;transform:translateY(","px);}100%{opacity:1;transform:translateY(0px);}"],400,400),Wi=Object(c.b)(["animation:"," ","ms forwards;"],Hi,gi.a),Vi=Object(c.d)(["0%{opacity:1;transform:translateY(0px);}100%{opacity:0;transform:translateY(-","px);}"],400),Ki=Object(c.b)(["animation:"," ","ms forwards;"],Vi,Bi),qi=c.c.div.withConfig({displayName:"BlockList__Wrapper",componentId:"ny54fa-3"})(["visibility:",";position:absolute;width:100%;height:100%;padding-top:","px;will-change:transform;",";",";",";",";",";"],(function(e){return e.isVisible?"visible":"hidden"}),(function(e){return e.topOffset}),(function(e){return e.isVisible&&e.appearing&&e.isNavigatingForward&&Wi}),(function(e){return e.isVisible&&e.fading&&e.isNavigatingForward&&Ki}),(function(e){return e.isVisible&&e.appearing&&!e.isNavigatingForward&&Mi}),(function(e){return e.isVisible&&e.fading&&!e.isNavigatingForward&&_i}),(function(e){return e.fading&&"pointer-events: none"})),Yi=function(e){var t=e.blocks,n=e.theme,o=e.currentRef,r=e.currentPath,c=e.isBlockChanging,l=e.previousActiveRef,s=e.previousRef,u=e.nextRef,p=e.layoutItemsSize,h=e.isInlineSubmitEnabled,f=e.isVisible,b=e.component,v=e.goToPreviousBlock,g=e.goToNextBlock,y=function(e,t){return h||t!==vi.a?function(e,t){return e.findIndex((function(e){return e.ref===t}))}(e,t):e.length},k=Object(m.a)(r),C=y(t,o),O=y(t,l),w=l===o||O<C,j=Object(i.useState)(!1),E=d()(j,2),S=E[0],x=E[1],P=Object(i.useState)(!1),I=d()(P,2),A=I[0],R=I[1],F=function(e){var t=e.next,n=e.previous;x(t),R(n)};return a.a.createElement(Ni,{onKeyDown:function(t){var n=t.keyCode,o=t.shiftKey,r=n===bt.a.ARUP||n===bt.a.TAB&&o,i=n===bt.a.ARDOWN||n===bt.a.TAB;n===bt.a.ENTER?(e.goToNextBlockFollowingLogic(e.currentRef),t.preventDefault()):r?(e.goToPreviousBlock(),t.preventDefault()):i&&(e.goToNextBlock(),t.preventDefault())}},a.a.createElement(re.Provider,{value:c},a.a.createElement(bi,{goToPreviousBlock:v,goToNextBlock:g,canSwipeNext:S,canSwipePrevious:A,fullHeight:!0},a.a.createElement(Ti,null,t.map((function(t){var n=t.ref===o,i=t.ref===s,c=t.ref===l,d=t.ref===u,h="payment"===t.type,m="date"===t.type,v=f&&(n||c);return v||n||i||d||(h||m)?a.a.createElement(qi,{key:t.ref,isVisible:v,appearing:o===t.ref,fading:o!==t.ref,isNavigatingForward:w,topOffset:e.topOffset},a.a.createElement(b,{onChangeCanSwipe:F,blockRef:t.ref,layoutItemsSize:p,listIndexText:k[y(r,t.ref)]})):null})))),a.a.createElement(Di,{areBlocksVisible:f,theme:n,blocks:t,currentRef:o,previousRef:s,nextRef:u})))};Yi.defaultProps={blocks:[],component:ui};var Ui=Yi,Gi=n(207),Qi=n(61),Xi=function(e){return e&&e.attachment&&"image"===e.attachment.type&&e.attachment.resource&&e.attachment.resource.src},Zi={goToNextBlockFollowingLogic:u.g,goToNextBlock:u.f,goToPreviousBlock:u.h,onEndAutoScroll:u.c},Ji=Object(o.b)((function(e){var t=Object(r.j)()&&Object(le.k)(e),n=!Object(Qi.a)(e)&&!t&&Object(le.h)(e),o=n?Object(le.B)(e):null,i=Xi(o),a=0;n&&(a=i?88:60);var c=Object(le.b)(e);return{blocks:Object(ue.j)(e),currentPath:Object(Gi.a)(e),currentRef:c,isInlineSubmitEnabled:Object(le.i)(e),nextRef:Object(Gi.b)(e,c),previousActiveRef:Object(le.u)(e),previousRef:Object(ue.y)(e),scrolling:Object(le.y)(e),isBlockChanging:Object(le.f)(e),theme:Object(me.e)(e),topOffset:a}}),Zi)(Ui),$i=c.c.section.withConfig({displayName:"UnfixedFooter__FooterWrapper",componentId:"sc-13oi4zw-0"})(["position:absolute;bottom:0;width:100%;pointer-events:",";opacity:",";transition:opacity 0.3s ease;overflow:hidden;outline:0;z-index:5;height:100%;"],(function(e){return e.isActive?"auto":"none"}),(function(e){return e.isActive?1:0})),ea=c.c.section.withConfig({displayName:"UnfixedFooter__FooterBackground",componentId:"sc-13oi4zw-1"})(["height:100%;"]),ta=c.c.div.withConfig({displayName:"UnfixedFooter__FooterContent",componentId:"sc-13oi4zw-2"})(["padding-top:30px;height:50%;width:100%;border-top:1px solid ",";transition:transform 300ms ",";transform:translateY(",");position:absolute;bottom:0;"],(function(e){return Object(r.g)(e.contextBackgroundColor)}),(function(e){return e.active?"cubic-bezier(0, 0.51, 0.1, 1.01)":"cubic-bezier(0.72, 0.2, 0.9, 0.39)"}),(function(e){return e.active?0:"100%"})),na=c.c.div.withConfig({displayName:"UnfixedFooter__FooterErrorMessage",componentId:"sc-13oi4zw-3"})(["padding:12px 0;background-color:rgba(153,0,0,0.8);border:1px solid rgba(0,0,0,0.15);position:absolute;width:100%;z-index:10;bottom:50%;"]),oa=function(e){var t=e.visible,n=e.timeout,o=e.color,r=e.onRetryClick;return t?a.a.createElement(I.a,{top:2},a.a.createElement(X,{messageKey:"label.warning.slowSubmission",color:o,actionLink:a.a.createElement(G,{color:o,isEnabled:0!==n,onClick:r,timeout:n})})):null},ra=function(e){var t=e.visible,n=e.centered,o=e.color,r=e.warningText,i=e.actionText;return t&&a.a.createElement(D.a,{position:n?"center":"left"},a.a.createElement(I.a,{top:2},a.a.createElement(x.a,{color:o,size:"sizeN1",useDefaultFont:!0,dimmed:!0},r," - ",a.a.createElement("a",{href:"https://www.typeform.com/help/report-abuse",target:"_blank",rel:"noopener noreferrer"},i))))},ia=function(e){function t(e){var n;return Be()(this,t),n=_e()(this,We()(t).call(this,e)),b()(Ke()(n),"getUnfixedFooterRef",(function(e){return n.unfixedFooterRef=e})),n.handlePreviousBlockNavigation=n.handlePreviousBlockNavigation.bind(Ke()(n)),n.handleBlockKeyboardEvent=n.handleBlockKeyboardEvent.bind(Ke()(n)),n.handleSubmitAction=n.handleSubmitAction.bind(Ke()(n)),n.handleRetryClick=n.handleRetryClick.bind(Ke()(n)),n.handleSwipe=n.handleSwipe.bind(Ke()(n)),n}return Ye()(t,e),Me()(t,[{key:"componentDidUpdate",value:function(){this.props.isFocused&&this.unfixedFooterRef&&this.unfixedFooterRef.focus()}},{key:"handlePreviousBlockNavigation",value:function(){this.props.goToPreviousBlock()}},{key:"handleSubmitAction",value:function(){this.props.submitForm(),this.props.isReviewModeEnabled&&this.props.invalidAnswersAmount&&this.props.reviewForm()}},{key:"handleBlockKeyboardEvent",value:function(e){e.keyCode===bt.a.ENTER&&this.handleSubmitAction()}},{key:"handleRetryClick",value:function(){this.props.resetRetryCount(),this.props.submitForm()}},{key:"handleSwipe",value:function(e){Math.abs(e.deltaY)>50/e.velocity&&"Down"===e.dir&&this.props.goToPreviousBlock()}},{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.isVisible,o=e.showPhishingMessage,r=e.errorMessageId,i=e.isButtonFullWidth,c=e.isLivePreview,l=e.isReviewModeEnabled,s=e.isPaymentBlockAnswered,u=e.invalidAnswersAmount,p=e.submit,d=e.price,h=e.theme,m=e.t;return a.a.createElement(fi,{upHandler:this.handlePreviousBlockNavigation,downHandler:Z.a},a.a.createElement(pi.a,w()({onSwiped:this.handleSwipe},{delta:10,preventDefaultTouchmoveEvent:!1,trackTouch:!0,trackMouse:!1}),a.a.createElement($i,{isActive:t&&n,tabIndex:"-1","data-qa":"unfixed-footer",onKeyDown:this.handleBlockKeyboardEvent,id:vi.a,ref:this.getUnfixedFooterRef,backgroundColor:h.colors.background},t&&r&&a.a.createElement(na,null,a.a.createElement(ye.a,null,a.a.createElement(x.a,{size:"sizeN1",color:"#fff",fontWeight:"regular",useDefaultFont:!0},m(r,{answerAmount:u})))),a.a.createElement(ea,{isActive:t,backgroundColor:h.colors.background,onClick:this.handlePreviousBlockNavigation}),a.a.createElement(ta,{contextBackgroundColor:h.colors.background,active:t,"data-qa":t?"unfixed-footer--active":"",backgroundColor:h.colors.background},a.a.createElement(ye.a,null,a.a.createElement(R.a,{isVisible:!p.isComplete,type:"fade",duration:200},a.a.createElement(D.a,{position:i?"center":"left"},a.a.createElement(W,{isLivePreview:c,isReviewModeEnabled:l&&u>0,isPaymentBlockAnswered:s,isSubmitting:p.isSubmitting,isComplete:p.isComplete,fullWidth:i,centered:i,onClick:this.handleSubmitAction,price:d,theme:h}))),a.a.createElement(ra,{color:h.colors.primary,warningText:m("label.warning.phishing"),actionText:m("label.action.phishing"),visible:o,centered:i}),a.a.createElement(oa,{timeout:p.retry.timeout,visible:p.retry.showMessage,color:h.colors.primary,onRetryClick:this.handleRetryClick}))))))}}]),t}(i.PureComponent);ia.defaultProps={showPhishingMessage:!0,errorMessageId:null,submit:{retry:{},isComplete:!1,isSubmitting:!1},submitForm:Z.a,size:{width:800},theme:{colors:{primary:r.b,background:r.b}},t:function(e){return e}};var aa=Object(N.a)((function(e){return a.a.createElement(ke.ResponsiveConsumer,null,(function(t){var n=t.width<Oe.e.md&&!e.isLivePreview;return a.a.createElement(ia,w()({isButtonFullWidth:n},e))}))})),ca=n(150),la={reviewForm:u.e,submitForm:u.w,resetRetryCount:u.p,goToPreviousBlock:u.h},sa=Object(o.b)((function(e){var t=Object(se.n)(e),n=Object(le.o)(e),o=Object(pe.h)(e);return t&&(o=1===t?"label.error.incompleteAnswer":"label.error.incompleteAnswers"),{submit:Object(pe.g)(e),showPhishingMessage:Object(he.d)(e),isActive:Object(ca.a)(e),isFocused:Object(ca.b)(e),isLivePreview:Object(le.l)(e),isPaymentBlockAnswered:Object(se.r)(e),isReviewModeEnabled:n,invalidAnswersAmount:t,errorMessageId:o,theme:Object(me.e)(e),price:Object(de.K)(e)}}),la)(aa),ua=n(653),pa=n.n(ua),da=n(307),ha=n.n(da);function ma(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function fa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ma(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ma(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ba=function(e){return e?e.childOfGroup&&e.listIndexText?null:e.titleCounterIcon||"arrow":null},va=c.c.div.withConfig({displayName:"StickyHeaderContainer__Wrapper",componentId:"sc-1tjdqrs-0"})(["position:absolute;top:0;left:0;width:100%;z-index:",";",";"],Oe.j.level3,(function(e){return e.isVisible?"":"pointer-events: none;"})),ga=h.a?0:300,ya=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return(function(t){function o(e){var t;return Be()(this,o),(t=_e()(this,We()(o).call(this,e))).state=fa({},e),t.shouldRender=!1,t.updateState=ha.a.apply(void 0,[t.updateState].concat(n)),t}return Ye()(o,t),Me()(o,[{key:"componentWillReceiveProps",value:function(e){this.shouldRender=!1,this.updateState(e)}},{key:"componentWillUnmount",value:function(){this.updateState.cancel()}},{key:"updateState",value:function(e){this.shouldRender=!0,this.setState(e)}},{key:"shouldComponentUpdate",value:function(){return this.shouldRender}},{key:"render",value:function(){return a.a.createElement(e,this.state)}}]),o}(i.Component))}(pa.a,ga,{}),ka=Object(ke.withBreakpoint)(Object(o.b)((function(e,t){var n=Object(Qi.a)(e),o=Object(le.k)(e),i=Object(r.j)()&&o,a=!n&&Object(le.g)(e)&&"sm"!==t.breakpoint&&!i,c=!n&&Object(le.h)(e)&&!i,l=a?Object(le.A)(e):null,s=c?Object(le.B)(e):null,u=ba(s),p=ba(l);return{groupHeaderVisible:c,groupTitle:s&&s.title,groupHeaderIcon:u,groupHeaderCounter:s&&s.listIndexText,groupHeaderImage:Xi(s),questionHeaderVisible:a,questionTitle:l&&l.title,questionHeaderIcon:p,questionHeaderCounter:l&&l.listIndexText,contextBackgroundColor:Object(me.a)(e),contentColor:Object(me.c)(e),counterColor:Object(me.d)(e),oldLayout:!0,isBlockChanging:Object(le.f)(e),activeBlockRef:l?l.ref:null,groupBlock:s}}))((function(e){var t=e.isBlockChanging,n=e.questionHeaderVisible,o=e.questionTitle,r=e.groupHeaderVisible,c=e.groupTitle,l=e.activeBlockRef,s=C()(e,["isBlockChanging","questionHeaderVisible","questionTitle","groupHeaderVisible","groupTitle","activeBlockRef"]),u=Object(i.useState)(!1),p=d()(u,2),h=p[0],m=p[1];Object(i.useEffect)((function(){if(!t){var e=setTimeout((function(){return m(!1)}),ga);return function(){return clearTimeout(e)}}m(!0)}),[t]);var f=!h&&!t&&(r||n);return a.a.createElement(va,{"data-qa-stickyheader-visible":f,"data-qa-stickyheader-blockref":l,isVisible:!h&&!t&&(r||n)},a.a.createElement(ya,w()({questionHeaderVisible:n&&!h&&!t,groupHeaderVisible:r,questionHeaderContent:o&&Object(T.a)(o),groupHeaderContent:c&&Object(T.a)(c)},s)))}))),Ca=n(123),Oa=n(206),wa=n.n(Oa),ja=n(655),Ea=n.n(ja),Sa=n(269),xa=n(288),Pa=g()(wa.a)((function(e){return function(){window.open(e,"_blank")}})),Ia=Object(Sa.a)(Object(o.b)((function(e,t){var n=Object(Qi.e)(e),o=Object(he.a)(e)(window.location.hostname,"typeform-footer"),i=Object(se.i)(e),a=Object(se.h)(e);return{answeredText:t.t("label.progress.proportion",{step:i,total:a}),brandButtonOnClick:Pa(o),brandButtonText:Object(T.a)(t.t("label.branding.poweredby")),buttonsColor:Object(me.b)(e),contextBackgroundColor:Object(me.a)(e),dataQa:"fixed-footer",nextButtonDisabled:!Object(xa.a)(e),percentageText:t.t("label.progress.percent",{percent:Math.round(100*i/a)}),previousButtonDisabled:!Object(xa.b)(e),progressBackgroundColor:Object(me.a)(e),progressColor:Object(me.d)(e),progressCompletedAmount:Object(se.i)(e),progressTotalAmount:Object(se.h)(e),progressType:Object(le.v)(e),transparentButtons:Object(me.f)(e),visible:!Object(r.j)()||!Object(le.k)(e),withBackground:!n,withBranding:Object(le.z)(e),withNavigationArrows:!n,withProgress:!n&&!Object(le.n)(e)}}),(function(e){return{nextButtonOnClick:function(){e(u.f())},previousButtonOnClick:function(){e(u.h())}}}))(Ea.a)),Aa=n(271),Ra=n.n(Aa),Fa=n(221),Da=n.n(Fa),Na=n(287),Ta=c.c.div.withConfig({displayName:"StickyFooter__CommitButtonWrapper",componentId:"sc-1ud3eur-0"})(["display:flex;align-items:center;"]),Ba=c.c.div.withConfig({displayName:"StickyFooter__StickyFooterPlaceholder",componentId:"sc-1ud3eur-1"})(["position:absolute;width:100%;overflow:hidden;height:","px;bottom:","px;z-index:",";opacity:",";visibility:",";"],56,Oe.d,(function(e){return e.isActive?Oe.j.level3:Oe.j.level0}),(function(e){return e.isActive?"1":"0"}),(function(e){return e.isActive?"visible":"hidden"})),La=c.c.div.withConfig({displayName:"StickyFooter__StickyFooterWrapper",componentId:"sc-1ud3eur-2"})(["display:flex;align-items:center;justify-content:space-between;border-top:1px solid;height:","px;background-color:",";border-color:",";"],(function(e){return e.height}),(function(e){return Object(r.r)(Object(r.l)(e.contextBackgroundColor,e.color,.2))}),(function(e){return Object(r.l)(e.contextBackgroundColor,e.color,.3)})),Ma=function(e){var t=e.blockRef,n=e.show,o=e.theme,i=e.t,c=e.breakpoint,l=e.buttonText,s=e.showButtonIcon,u=e.isButtonTypeSubmit,p=e.isEnabled,d=e.isLivePreview,h=e.isPaymentBlockAnswered,m=e.isReviewModeEnabled,f=e.invalidAnswersAmount,b=e.onCommitAnswer,v=e.recenter,g=e.submit,y=e.price;if(!p)return null;var k="sm"===c,C=k||Object(r.j)()?"":Object(T.a)(i("label.buttonHint.default"));return a.a.createElement(Ba,{isActive:n},a.a.createElement(R.a,{type:"slideUp",isVisible:n},a.a.createElement(La,{height:56,contextBackgroundColor:o.colors.background,color:o.colors.secondary,"data-qa":"sticky-footer","data-qa-visible":n},a.a.createElement(ye.a,null,a.a.createElement(Ta,null,u?a.a.createElement(H,{centered:k,fullWidth:k,isComplete:g.isComplete,isLivePreview:d,isPaymentBlockAnswered:h,isReviewModeEnabled:m&&f>0,isSubmitting:g.isSubmitting,onClick:function(){b(t,Na.a),v("bottom")},price:y,size:"medium",t:i,theme:o}):a.a.createElement(Da.a,{fullWidth:k,onClick:function(){b(t,Na.a)},iconSvg:s?V.a:null,size:"medium",color:o.colors.button,contextBackgroundColor:o.colors.background,transparent:o.hasTransparentButton,dataQa:"sticky-footer-button"},i(l)),C&&a.a.createElement(I.a,{left:2},a.a.createElement(Ra.a,{text:C,color:o.colors.secondary})))))))};Ma.defaultProps={t:function(e){return e},recenter:function(e){return e},buttonText:"label.button.ok",showButtonIcon:!0,isEnabled:!0,theme:{colors:{background:r.b,button:r.b,secondary:r.b}},submit:{retry:{},isComplete:!1,isSubmitting:!1}};var za=Object(ke.withBreakpoint)(Object(N.a)(Ma)),_a={onCommitAnswer:u.a,recenter:u.m},Ha=Object(o.b)((function(e){var t=Object(le.b)(e),n=Object(le.x)(e),o=Object(ue.c)(e,n);if(!o||n!==t)return{show:!1,theme:Object(me.e)(e)};var i=Object(r.j)()&&Object(le.k)(e),a=!Object(le.i)(e)&&Object(le.o)(e);return{blockRef:n,buttonText:o.buttonText,invalidAnswersAmount:Object(se.n)(e),isButtonTypeSubmit:Object(ue.n)(e,n),isEnabled:Object(r.j)(),isLivePreview:Object(le.l)(e),isPaymentBlockAnswered:Object(se.r)(e),isReviewModeEnabled:a,price:Object(de.K)(e),show:!Object(Qi.e)(e)&&!i,showButtonIcon:!Object(ue.t)(o),submit:Object(pe.g)(e),theme:Object(me.e)(e)}}),_a)(za);function Wa(e){var t=e.enabled;return Object(i.useEffect)((function(){var e=function(e){if(t)return e.preventDefault(),e.returnValue="",""};return Fo.b.addEventListener("beforeunload",e,!0),function(){return Fo.b.removeEventListener("beforeunload",e,!0)}}),[t]),null}var Va=c.c.div.withConfig({displayName:"Form__Root",componentId:"sc-18c4ntz-0"})(["height:100%;overflow:hidden;"]),Ka=c.c.div.withConfig({displayName:"Form__FooterWrapper",componentId:"sc-18c4ntz-1"})(["position:absolute;opacity:inherit;right:0;left:0;bottom:0;z-index:10;pointer-events:none;"]),qa=function(e){var t=e.isLivePreview,n=e.submit,o=void 0===n?{}:n,r=e.showBlockList,c=e.layoutItemsSize,l=e.hasBlocksWithAnswer,s=e.isThankYouScreenActive,u=e.showWelcomeScreen,p=e.isInlineSubmitEnabled,d=Object(Ca.a)(),m=!t&&!d&&!(o.isComplete&&o.isSuccess)&&l;return d&&u?null:a.a.createElement(Va,null,a.a.createElement(ka,null),!s&&a.a.createElement(i.Fragment,null,a.a.createElement(Ji,{component:ui,isVisible:r,layoutItemsSize:c}),a.a.createElement(Ha,null)),!p&&a.a.createElement(sa,{isVisible:r}),a.a.createElement(R.a,{isVisible:r,type:"fade",duration:h.a?0:500,delay:h.a?0:300},a.a.createElement(Ka,null,a.a.createElement(Ia,null))),a.a.createElement(Wa,{enabled:m}))};qa.defaultProps={submit:{},layoutItemsSize:{}};var Ya=qa,Ua=n(27);t.default=Object(o.b)((function(e){return{isLivePreview:Object(le.l)(e),submit:Object(pe.g)(e),theme:e.form.theme,showBlockList:!Object(Ua.b)(e)&&!Object(Ua.a)(e),isFooterVisible:!Object(r.j)()||!Object(le.k)(e),hasBlocksWithAnswer:Object(se.l)(e),isThankYouScreenActive:Object(Ua.a)(e),showWelcomeScreen:Object(Ua.b)(e),isInlineSubmitEnabled:Object(le.i)(e)}}))(Ya)}}]);